(p=>{p("#form").length&&p("#form").validate(),p("#blood-request").length&&p("#blood-request").validate(),p("#table_id").length&&p("#table_id").DataTable(),0<p(".donor_wrapper").length&&p(".donors").each(function(){var e,a,o,i=idonate.ajaxurl,r=idonate.nonce;function c(t,n){p("#preloader").show(),p.ajax({type:"POST",url:n,data:{user_id:t,nonce:r,action:"idonate_post_admin_popup_next_prev"},success:function(t){t=p(t).css({opacity:0});p(".idonate_popup_ajax_content").html(t),t.animate({opacity:1}),p("#preloader").hide()}})}p(".donors").on("click",".idonate_popup_modal",function(t){t.preventDefault(),t.stopPropagation();var n,t=p(this).parents(".donor_info").data("id");n=[],p(".donors").find(".donor_info").each(function(){n.push(p(this).data("id"))}),e=((t,n)=>{for(var e in n)if(n[e]==t)return e;return!1})(t,a=n),o=a.length,p.ajax({type:"POST",url:i,data:{user_id:t,action:"idonate_post_popup",nonce:r},success:function(t){t=p(t).css({opacity:0});p.magnificPopup.open({type:"inline",showCloseBtn:!1,closeBtnInside:!1,enableEscapeKey:!0,closeOnBgClick:!0,items:{src:t}}),t.animate({opacity:1})}}),p(document).off("click",".idonate-popup-button-next").on("click",".idonate-popup-button-next",function(t){t.preventDefault(),t.stopPropagation(),t=e,e=t=o<=++t?0:t,c(a[e],i)}),p(document).off("click",".idonate-popup-button-prev").on("click",".idonate-popup-button-prev",function(t){var n;t.preventDefault(),t.stopPropagation(),t=e,n=o,e=t=--t<0?n-1:t,c(a[e],i)})})}),0<p(".request_wrapper").length&&p(".request").each(function(){var e,a,o,i=idonate.ajaxurl,r=idonate.nonce;function c(t,n){p("#preloader").show(),p.ajax({type:"POST",url:n,data:{post_id:t,nonce:r,action:"idonate_request_popup_next_prev"},success:function(t){t=p(t).css({opacity:0});p(".idonate_popup_ajax_content").html(t),t.animate({opacity:1}),p("#preloader").hide()}})}p(".request").on("click",".idonate_request_popup_modal",function(t){t.preventDefault(),t.stopPropagation();var n,t=p(this).parents(".single-request").data("id");n=[],p(".request").find(".single-request").each(function(){n.push(p(this).data("id"))}),e=((t,n)=>{for(var e in n)if(n[e]==t)return e;return!1})(t,a=n),o=a.length,p.ajax({type:"POST",url:i,data:{post_id:t,action:"idonate_request_popup_modal",nonce:r},success:function(t){t=p(t).css({opacity:0});p.magnificPopup.open({type:"inline",showCloseBtn:!1,closeBtnInside:!1,enableEscapeKey:!0,closeOnBgClick:!0,items:{src:t}}),t.animate({opacity:1})}}),p(document).off("click",".idonate-popup-button-next").on("click",".idonate-popup-button-next",function(t){t.preventDefault(),t.stopPropagation(),t=e,e=t=o<=++t?0:t,c(a[e],i)}),p(document).off("click",".idonate-popup-button-prev").on("click",".idonate-popup-button-prev",function(t){var n;t.preventDefault(),t.stopPropagation(),t=e,n=o,e=t=--t<0?n-1:t,c(a[e],i)})})}),p(document).on("change",".profilepic",function(){var t,n,e=p(this);e[0].files&&(t=new FileReader,n=p(e.data("target")),t.onload=function(t){n.attr("src",t.target.result)},t.readAsDataURL(e[0].files[0]))}),p("body").on("change",".country",function(){var i=document.getElementById("state");p.ajax({type:"POST",url:idonate.ajaxurl,data:{country:p(this).val(),action:"country_to_states_ajax"},success:function(t){if(all_state=JSON.parse(t),i){var n,e=JSON.parse(i.getAttribute("data-state")),a={};for(n in all_state)e.hasOwnProperty(n)&&(a[n]=all_state[n]);(t=>{for(var n in t)if(t.hasOwnProperty(n))return 1})(a)&&(p(".state").empty(),o="",p.each(a,function(t,n){o+='<option value="'+t+'">'+n+"</option>"}),p(".state").append(o))}else{p(".state").empty();var o="";p.each(all_state,function(t,n){o+='<option value="'+t+'">'+n+"</option>"}),p(".state").append(o)}}})}),0<p(".donor_wrapper").length&&p(".donor_wrapper").each(function(){var t=p(this),n=t.data("pagenum_link");function e(n,t){var e=n.find("#bloodgroup").val(),a=n.find("#availability").val(),o=n.find("#country").val(),i=n.find("#state").val(),r=n.find("#city").val(),c=n.find("#name").val();p.ajax({url:idonate.ajaxurl,type:"POST",data:{action:"idonate_search_donors",nonce:idonate.nonce,bloodgroup:e,availability:a,country:o,state:i,city:r,name:c,pagenumLink:t},success:function(t){t.success?n.find(".donors").html(t.data.html):n.find(".donors").html('<h3 class="alert text-center alert-danger">'+t.data.message+"</h3>")}})}t.find("#bloodgroup, #availability, #country, #state").change(function(){e(t,n)}),t.find("#city, #name").on("keyup",function(){e(t,n)}),t.find("#reset-button").click(function(){t.find("#bloodgroup").val(""),t.find("#availability").val(""),t.find("#country").val(""),t.find("#state").val(""),t.find("#city").val(""),t.find("#name").val(""),e(t,n)})}),0<p(".request_wrapper").length&&p(".request_wrapper").each(function(){var t=p(this),n=t.data("pagenum_link");function e(n,t){var e=n.find("#bloodgroup").val(),a=n.find("#country").val(),o=n.find("#state").val(),i=n.find("#city").val(),r=n.find("#name").val(),c=n.find("#start_date").val(),d=n.find("#end_date").val();p.ajax({url:idonate.ajaxurl,type:"POST",data:{action:"idonate_search_request",nonce:idonate.nonce,bloodgroup:e,country:a,state:o,city:i,name:r,start_date:c,end_date:d,pagenumLink:t},success:function(t){t.success?n.find(".request").html(t.data.html):n.find(".request").html('<h3 class="alert text-center alert-danger">'+t.data.message+"</h3>")}})}t.find("#bloodgroup, #country, #state").change(function(){e(t,n)}),t.find("#city, #name, #start_date, #end_date").on("keyup change",function(){e(t,n)}),t.find("#reset-button").click(function(){t.find("#bloodgroup").val(""),t.find("#country").val(""),t.find("#state").val(""),t.find("#city").val(""),t.find("#name").val(""),t.find("#start_date").val(""),t.find("#end_date").val(""),e(t,n)})}),setTimeout(function(){var t=document.getElementById("idonate-response-msg");t&&t.parentNode.removeChild(t)},3e3)})(jQuery);