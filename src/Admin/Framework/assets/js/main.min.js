!function(j,_,b,y){var A={funcs:{}};A.vars={onloaded:!1,$body:j("body"),$window:j(_),$document:j(b),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:j("body").hasClass("rtl")},A.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(e,t){var n=new RegExp(A.helper.preg_quote(t+"[\\d+]"),"g");e.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),e.each(function(e){j(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+e+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(i,a,o){var d;return function(){var e=this,t=arguments,n=o&&!d;clearTimeout(d),d=setTimeout(function(){d=null,o||i.apply(e,t)},a),n&&i.apply(e,t)}}},j.fn.idonate_clone=function(){for(var e=j.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=e.find("select").add(e.filter("select")),i=0;i<t.length;++i)for(var a=0;a<t[i].options.length;++a)!0===t[i].options[a].selected&&(n[i].options[a].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),e},j.fn.idonate_expand_all=function(){return this.each(function(){j(this).on("click",function(e){e.preventDefault(),j(".idonate-wrapper").toggleClass("idonate-show-all"),j(".idonate-section").idonate_reload_script(),j(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},j.fn.idonate_nav_options=function(){return this.each(function(){var n,e=j(this),t=j(_),i=j("#wpwrap"),a=e.find("a");t.on("hashchange idonate.hashchange",function(){var e=_.location.hash.replace("#tab=",""),e=e||a.first().attr("href").replace("#tab=",""),t=j('[data-tab-id="'+e+'"]');t.length&&(t.closest(".idonate-tab-item").addClass("idonate-tab-expanded").siblings().removeClass("idonate-tab-expanded"),t.next().is("ul")&&(e=(t=t.next().find("li").first().find("a")).data("tab-id")),a.removeClass("idonate-active"),t.addClass("idonate-active"),n&&n.addClass("hidden"),(t=j('[data-section-id="'+e+'"]')).removeClass("hidden"),t.idonate_reload_script(),j(".idonate-section-id").val(t.index()+1),n=t,i.hasClass("wp-responsive-open"))&&(j("html, body").animate({scrollTop:t.offset().top-50},200),i.removeClass("wp-responsive-open"))}).trigger("idonate.hashchange")})},j.fn.idonate_nav_metabox=function(){return this.each(function(){var n,e=j(this),i=e.find("a"),a=e.parent().find(".idonate-section");i.each(function(t){j(this).on("click",function(e){e.preventDefault();e=j(this),i.removeClass("idonate-active"),e.addClass("idonate-active"),n!==y&&n.addClass("hidden"),e=a.eq(t);e.removeClass("hidden"),e.idonate_reload_script(),n=e})}),i.first().trigger("click")})},j.fn.idonate_page_templates=function(){this.length&&j(b).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var e=j(this).val()||"default";j(".idonate-page-templates").removeClass("idonate-metabox-show").addClass("idonate-metabox-hide"),j(".idonate-page-"+e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("idonate-metabox-hide").addClass("idonate-metabox-show")})},j.fn.idonate_post_formats=function(){this.length&&j(b).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var e="0"===(e=j(this).val()||"default")?"default":e;j(".idonate-post-formats").removeClass("idonate-metabox-show").addClass("idonate-metabox-hide"),j(".idonate-post-format-"+e).removeClass("idonate-metabox-hide").addClass("idonate-metabox-show")})},j.fn.idonate_search=function(){return this.each(function(){j(this).find("input").on("change keyup",function(){var t=j(this).val(),e=j(".idonate-wrapper"),n=e.find(".idonate-section").find("> .idonate-field:not(.idonate-depend-on)"),i=n.find("> .idonate-title, .idonate-search-tags");3<t.length?(n.addClass("idonate-metabox-hide"),e.addClass("idonate-search-all"),i.each(function(){var e=j(this);e.text().match(new RegExp(".*?"+t+".*?","i"))&&((e=e.closest(".idonate-field")).removeClass("idonate-metabox-hide"),e.parent().idonate_reload_script())})):(n.removeClass("idonate-metabox-hide"),e.removeClass("idonate-search-all"))})})},j.fn.idonate_sticky=function(){return this.each(function(){function e(){r=i.scrollTop(),s()}var n=j(this),i=j(_),a=n.find(".idonate-header-inner"),o=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),d=32,r=0,t=!1,l=function(){var e=n.offset().top,e=Math.max(d,e-r),t=i.innerWidth();e<=d&&782<t?(a.css({width:n.outerWidth()-o}),n.css({height:n.outerHeight()}).addClass("idonate-sticky")):(a.removeAttr("style"),n.removeAttr("style").removeClass("idonate-sticky"))},s=function(){t||requestAnimationFrame(function(){l(),t=!1}),t=!0};i.on("scroll resize",e),e()})},j.fn.idonate_dependency=function(){return this.each(function(){var t,n,l,s,e=j(this),i=e.children("[data-controller]");i.length&&(t=j.idonate_deps.createRuleset(),n=j.idonate_deps.createRuleset(),l=[],s=[],i.each(function(){var i=j(this),e=i.data("controller").split("|"),a=i.data("condition").split("|"),o=i.data("value").toString().split("|"),d=!!i.data("depend-global"),r=d?n:t;j.each(e,function(e,t){var n=o[e]||"",e=a[e]||a[0];(r=r.createRule('[data-depend-id="'+t+'"]',e,n)).include(i),(d?s:l).push(t)})}),l.length&&j.idonate_deps.enable(e,t,l),s.length)&&j.idonate_deps.enable(A.vars.$body,n,s)})},j.fn.idonate_field_accordion=function(){return this.each(function(){j(this).find(".idonate-accordion-title").on("click",function(){var e=j(this),t=e.find(".idonate-accordion-icon"),e=e.next();t.hasClass("icofont-rounded-right")?t.removeClass("icofont-rounded-right").addClass("icofont-rounded-down"):t.removeClass("icofont-rounded-down").addClass("icofont-rounded-right"),e.data("opened")||(e.idonate_reload_script(),e.data("opened",!0)),e.toggleClass("idonate-accordion-open")})})},j.fn.idonate_field_backup=function(){return this.each(function(){var t,n,i,a;_.wp.customize!==y&&(n=j(t=this),j("body"),i=n.find(".idonate-import"),a=n.find(".idonate-reset"),t.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("idonate_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},a.on("click",function(e){e.preventDefault(),A.vars.is_confirm&&(t.notificationOverlay(),_.wp.ajax.post("idonate-reset",{unique:a.data("unique"),nonce:a.data("nonce")}).done(function(e){_.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("idonate_field_backup_notification")}))}),i.on("click",function(e){e.preventDefault(),A.vars.is_confirm&&(t.notificationOverlay(),_.wp.ajax.post("idonate-import",{unique:i.data("unique"),nonce:i.data("nonce"),data:n.find(".idonate-import-data").val()}).done(function(e){_.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("idonate_field_backup_notification")}))}))})},j.fn.idonate_field_background=function(){return this.each(function(){j(this).find(".idonate--background-image").idonate_reload_script()})},j.fn.idonate_field_code_editor=function(){return this.each(function(){var t,i,e,a,o;"function"==typeof CodeMirror&&(t=j(this),i=t.find("textarea"),e=t.find(".CodeMirror"),a=i.data("editor"),e.length&&e.remove(),o=setInterval(function(){var n,e;t.is(":visible")&&(n=CodeMirror.fromTextArea(i[0],a),"default"!==a.theme&&-1===A.vars.code_themes.indexOf(a.theme)&&(e=j("<link>"),j("#idonate-codemirror-css").after(e),e.attr({rel:"stylesheet",id:"idonate-codemirror-"+a.theme+"-css",href:a.cdnURL+"/theme/"+a.theme+".min.css",type:"text/css",media:"all"}),A.vars.code_themes.push(a.theme)),CodeMirror.modeURL=a.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,a.mode),n.on("change",function(e,t){i.val(n.getValue()).trigger("change")}),clearInterval(o))}))})},j.fn.idonate_field_date=function(){return this.each(function(){var e=j(this),n=e.find("input"),i=e.find(".idonate-date-settings").data("settings"),i=j.extend({},i,{showAnim:"",beforeShow:function(e,t){j(t.dpDiv).addClass("idonate-datepicker-wrapper")},onClose:function(e,t){j(t.dpDiv).removeClass("idonate-datepicker-wrapper")}});2===n.length&&(i=j.extend({},i,{onSelect:function(e){j(this),n.first();var t=n.first().attr("id")===j(this).attr("id")?"minDate":"maxDate",e=j.datepicker.parseDate(i.dateFormat,e);n.not(this).datepicker("option",t,e)}})),n.each(function(){var e=j(this);e.hasClass("hasDatepicker")&&e.removeAttr("id").removeClass("hasDatepicker"),e.datepicker(i)})})},j.fn.idonate_field_datetime=function(){return this.each(function(){var e=j(this),i=e.find("input"),t=e.find(".idonate-datetime-settings").data("settings"),t=j.extend({},t,{onReady:function(e,t,n){j(n.calendarContainer).addClass("idonate-flatpickr")}});2===i.length&&(t=j.extend({},t,{onChange:function(e,t,n){"from"===j(n.element).data("type")?i.last().get(0)._flatpickr.set("minDate",e[0]):i.first().get(0)._flatpickr.set("maxDate",e[0])}})),i.each(function(){j(this).flatpickr(t)})})},j.fn.idonate_field_fieldset=function(){return this.each(function(){j(this).find(".idonate-fieldset-content").idonate_reload_script()})},j.fn.idonate_field_gallery=function(){return this.each(function(){var a,e=j(this),o=e.find(".idonate-edit-gallery"),d=e.find(".idonate-clear-gallery"),r=e.find("ul"),l=e.find("input");e.find("img");e.on("click",".idonate-button, .idonate-edit-gallery",function(e){var t=j(this),n=l.val(),t=t.hasClass("idonate-edit-gallery")?"edit":"add",i="add"!=t||n.length?"gallery-edit":"gallery";e.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&("gallery"==i?(a=_.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(a=_.wp.media.gallery.edit('[gallery ids="'+n+'"]'),"add"==t&&a.setState("gallery-library")),a.on("update",function(e){r.empty();e=e.models.map(function(e){var e=e.toJSON(),t=(e.sizes&&e.sizes.thumbnail&&e.sizes.thumbnail.url?e.sizes.thumbnail:e).url;return r.append('<li><img src="'+t+'"></li>'),e.id});l.val(e.join(",")).trigger("change"),d.removeClass("hidden"),o.removeClass("hidden")}))}),d.on("click",function(e){e.preventDefault(),r.empty(),l.val("").trigger("change"),d.addClass("hidden"),o.addClass("hidden")})})},j.fn.idonate_field_group=function(){return this.each(function(){function e(e){e.preventDefault();var t,n,i,a,e=o.children(".idonate-cloneable-item").length;r.hide(),h&&h<e+1?d.show():(t=(e=j(this).parent().parent()).children(".idonate-cloneable-helper").idonate_clone(!0),n=e.children(".idonate-cloneable-title").idonate_clone(),i=e.children(".idonate-cloneable-content").idonate_clone(),(a=j('<div class="idonate-cloneable-item" />')).append(t),a.append(n),a.append(i),o.children().eq(e.index()).after(a),A.helper.name_nested_replace(o.children(".idonate-cloneable-item"),c),o.accordion("refresh"),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0}),f&&u(o))}function t(e){e.preventDefault(),e=o.children(".idonate-cloneable-item").length,d.hide(),r.hide(),p&&e-1<p?r.show():(j(this).closest(".idonate-cloneable-item").remove(),A.helper.name_nested_replace(o.children(".idonate-cloneable-item"),c),o.idonate_customizer_refresh(),f&&u(o))}var n=j(this),i=n.children(".idonate-fieldset"),i=i.length?i:n,o=i.children(".idonate-cloneable-wrapper"),a=i.children(".idonate-cloneable-hidden"),d=i.children(".idonate-cloneable-max"),r=i.children(".idonate-cloneable-min"),l=o.data("title-by"),s=o.data("title-by-prefix"),c=o.data("field-id"),f=Boolean(Number(o.data("title-number"))),h=parseInt(o.data("max")),p=parseInt(o.data("min")),u=(o.hasClass("ui-accordion")&&o.find(".ui-accordion-header-icon").remove(),function(e){e.find(".idonate-cloneable-title-number").each(function(e){j(this).html(j(this).closest(".idonate-cloneable-item").index()+1+".")})});o.accordion({header:"> .idonate-cloneable-item > .idonate-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"idonate-cloneable-header-icon icofont-rounded-right",activeHeader:"idonate-cloneable-header-icon icofont-rounded-down"},activate:function(e,t){var i,a,n=t.newPanel,t=t.newHeader;n.length&&!n.data("opened")?(i=t.find(".idonate-cloneable-value"),a=[],j.each(l,function(e,t){a.push(n.find('[data-depend-id="'+t+'"]'))}),j.each(a,function(e,t){t.on("change keyup idonate.keyup",function(){var n=[];j.each(a,function(e,t){t=t.val();t&&n.push(t)}),n.length&&i.text(n.join(s))}).trigger("idonate.keyup")}),n.idonate_reload_script(),n.data("opened",!0),n.data("retry",!1)):n.data("retry")&&(n.idonate_reload_script_retry(),n.data("retry",!1))}}),o.sortable({axis:"y",handle:".idonate-cloneable-title,.idonate-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){o.accordion({active:!1}),o.sortable("refreshPositions"),t.item.children(".idonate-cloneable-content").data("retry",!0)},update:function(e,t){A.helper.name_nested_replace(o.children(".idonate-cloneable-item"),c),o.idonate_customizer_refresh(),f&&u(o)}}),i.children(".idonate-cloneable-add").on("click",function(e){e.preventDefault();var t=o.children(".idonate-cloneable-item").length;r.hide(),h&&h<t+1?d.show():((e=a.idonate_clone(!0)).removeClass("idonate-cloneable-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(c+"[0]",c+"["+t+"]")}),o.append(e),o.accordion("refresh"),o.accordion({active:t}),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0}),f&&u(o))}),o.children(".idonate-cloneable-item").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-clone",e),i.children(".idonate-cloneable-hidden").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-clone",e);o.children(".idonate-cloneable-item").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-remove",t),i.children(".idonate-cloneable-hidden").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-remove",t)})},j.fn.idonate_field_icon=function(){return this.each(function(){var n=j(this);n.on("click",".idonate-icon-add",function(e){e.preventDefault();var e=j(this),t=j("#idonate-modal-icon");t.removeClass("hidden"),A.vars.$icon_target=n,A.vars.icon_modal_loaded||(t.find(".idonate-modal-loading").show(),_.wp.ajax.post("idonate-get-icons",{nonce:e.data("nonce")}).done(function(e){t.find(".idonate-modal-loading").hide(),A.vars.icon_modal_loaded=!0;var n=t.find(".idonate-modal-load").html(e.content);n.on("click","i",function(e){e.preventDefault();e=j(this).attr("title");A.vars.$icon_target.find(".idonate-icon-preview i").removeAttr("class").addClass(e),A.vars.$icon_target.find(".idonate-icon-preview").removeClass("hidden"),A.vars.$icon_target.find(".idonate-icon-remove").removeClass("hidden"),A.vars.$icon_target.find("input").val(e).trigger("change"),t.addClass("hidden")}),t.on("change keyup",".idonate-icon-search",function(){var t=j(this).val();n.find("i").each(function(){var e=j(this);e.attr("title").search(new RegExp(t,"i"))<0?e.hide():e.show()})}),t.on("click",".idonate-modal-close, .idonate-modal-overlay",function(){t.addClass("hidden")})}).fail(function(e){t.find(".idonate-modal-loading").hide(),t.find(".idonate-modal-load").html(e.error),t.on("click",function(){t.addClass("hidden")})}))}),n.on("click",".idonate-icon-remove",function(e){e.preventDefault(),n.find(".idonate-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),j(this).addClass("hidden")})})},j.fn.idonate_field_map=function(){return this.each(function(){var e,t,n,i,a,o,d,r,l,s,c;"undefined"!=typeof L&&(c=(e=j(this)).find(".idonate--map-osm"),t=e.find(".idonate--map-search input"),n=e.find(".idonate--latitude"),i=e.find(".idonate--longitude"),a=e.find(".idonate--zoom"),o=c.data("map"),d=L.map(c.get(0),o),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d),r=L.marker(o.center,{draggable:!0}).addTo(d),l=function(e){n.val(e.lat),i.val(e.lng),a.val(d.getZoom())},d.on("click",function(e){r.setLatLng(e.latlng),l(e.latlng)}),d.on("zoom",function(){l(r.getLatLng())}),r.on("drag",function(){l(r.getLatLng())}),t.length||(t=j('[data-depend-id="'+e.find(".idonate--address-field").data("address-field")+'"]')),s={},t.autocomplete({source:function(e,t){var n=e.term;n in s?t(s[n]):j.get("https://nominatim.openstreetmap.org/search",{format:"json",q:n},function(e){e=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}];s[n]=e,t(e)})},select:function(e,t){if("no-data"===t.item.value)return!1;t=L.latLng(t.item.lat,t.item.lon);d.panTo(t),r.setLatLng(t),l(t)},create:function(e,t){j(this).autocomplete("widget").addClass("idonate-map-ui-autocomplate")}}),n.on("change",c=function(){var e=L.latLng(n.val(),i.val());d.panTo(e),r.setLatLng(e)}),i.on("change",c))})},j.fn.idonate_field_link=function(){return this.each(function(){var i=j(this),e=i.find(".idonate--link"),a=i.find(".idonate--add"),o=i.find(".idonate--edit"),d=i.find(".idonate--remove"),r=i.find(".idonate--result"),t=A.helper.uid("idonate-wplink-textarea-");a.on("click",function(e){e.preventDefault(),_.wpLink.open(t)}),o.on("click",function(e){e.preventDefault(),a.trigger("click"),j("#wp-link-url").val(i.find(".idonate--url").val()),j("#wp-link-text").val(i.find(".idonate--text").val()),j("#wp-link-target").prop("checked","_blank"===i.find(".idonate--target").val())}),d.on("click",function(e){e.preventDefault(),i.find(".idonate--url").val("").trigger("change"),i.find(".idonate--text").val(""),i.find(".idonate--target").val(""),a.removeClass("hidden"),o.addClass("hidden"),d.addClass("hidden"),r.parent().addClass("hidden")}),e.attr("id",t).on("change",function(){var e=_.wpLink.getAttrs(),t=e.href,n=j("#wp-link-text").val(),e=e.target||"";i.find(".idonate--url").val(t).trigger("change"),i.find(".idonate--text").val(n),i.find(".idonate--target").val(e),r.html('{url:"'+t+'", text:"'+n+'", target:"'+e+'"}'),a.addClass("hidden"),o.removeClass("hidden"),d.removeClass("hidden"),r.parent().removeClass("hidden")})})},j.fn.idonate_field_media=function(){return this.each(function(){var n,i=j(this),a=i.find(".idonate--button"),o=i.find(".idonate--remove"),d=a.data("library")&&a.data("library").split(",")||"",r=!!i.hasClass("idonate-assign-field-background")&&i.closest(".idonate-field-background").find(".idonate--auto-attributes");a.on("click",function(e){e.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&(n||(n=_.wp.media({library:{type:d}})).on("select",function(){var e=n.state().get("selection").first().attributes,t=a.data("preview-size")||"thumbnail";d.length&&-1===d.indexOf(e.subtype)&&-1===d.indexOf(e.type)||(i.find(".idonate--id").val(e.id),i.find(".idonate--width").val(e.width),i.find(".idonate--height").val(e.height),i.find(".idonate--alt").val(e.alt),i.find(".idonate--title").val(e.title),i.find(".idonate--description").val(e.description),t=void 0!==e.sizes&&void 0!==e.sizes.thumbnail&&"thumbnail"===t?e.sizes.thumbnail.url:void 0!==e.sizes&&void 0!==e.sizes.full?e.sizes.full.url:"image"===e.type?e.url:e.icon,r&&r.removeClass("idonate--attributes-hidden"),o.removeClass("hidden"),i.find(".idonate--preview").removeClass("hidden"),i.find(".idonate--src").attr("src",t),i.find(".idonate--thumbnail").val(t),i.find(".idonate--url").val(e.url).trigger("change"))}),n.open())}),o.on("click",function(e){e.preventDefault(),r&&r.addClass("idonate--attributes-hidden"),o.addClass("hidden"),i.find("input").val(""),i.find(".idonate--preview").addClass("hidden"),i.find(".idonate--url").trigger("change")})})},j.fn.idonate_field_repeater=function(){return this.each(function(){function e(e){e.preventDefault();var t,n,i,e=a.children(".idonate-repeater-item").length;r.hide(),s&&s<e+1?d.show():(t=(e=j(this).parent().parent().parent()).children(".idonate-repeater-content").idonate_clone(),n=e.children(".idonate-repeater-helper").idonate_clone(!0),(i=j('<div class="idonate-repeater-item" />')).append(t),i.append(n),a.children().eq(e.index()).after(i),i.children(".idonate-repeater-content").idonate_reload_script(),A.helper.name_nested_replace(a.children(".idonate-repeater-item"),l),a.idonate_customizer_refresh(),a.idonate_customizer_listen({closest:!0}))}function t(e){e.preventDefault(),e=a.children(".idonate-repeater-item").length,d.hide(),r.hide(),c&&e-1<c?r.show():(j(this).closest(".idonate-repeater-item").remove(),A.helper.name_nested_replace(a.children(".idonate-repeater-item"),l),a.idonate_customizer_refresh())}var n=j(this),i=n.children(".idonate-fieldset"),i=i.length?i:n,a=i.children(".idonate-repeater-wrapper"),o=i.children(".idonate-repeater-hidden"),d=i.children(".idonate-repeater-max"),r=i.children(".idonate-repeater-min"),l=a.data("field-id"),s=parseInt(a.data("max")),c=parseInt(a.data("min"));a.children(".idonate-repeater-item").children(".idonate-repeater-content").idonate_reload_script(),a.sortable({axis:"y",handle:".idonate-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){A.helper.name_nested_replace(a.children(".idonate-repeater-item"),l),a.idonate_customizer_refresh(),t.item.idonate_reload_script_retry()}}),i.children(".idonate-repeater-add").on("click",function(e){e.preventDefault();var t=a.children(".idonate-repeater-item").length;r.hide(),s&&s<t+1?d.show():((e=o.idonate_clone(!0)).removeClass("idonate-repeater-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(l+"[0]",l+"["+t+"]")}),a.append(e),e.children(".idonate-repeater-content").idonate_reload_script(),a.idonate_customizer_refresh(),a.idonate_customizer_listen({closest:!0}))}),a.children(".idonate-repeater-item").children(".idonate-repeater-helper").on("click",".idonate-repeater-clone",e),i.children(".idonate-repeater-hidden").children(".idonate-repeater-helper").on("click",".idonate-repeater-clone",e);a.children(".idonate-repeater-item").children(".idonate-repeater-helper").on("click",".idonate-repeater-remove",t),i.children(".idonate-repeater-hidden").children(".idonate-repeater-helper").on("click",".idonate-repeater-remove",t)})},j.fn.idonate_field_slider=function(){return this.each(function(){var e=j(this),n=e.find("input"),t=e.find(".idonate-slider-ui"),e=n.data(),i=n.val()||0;t.hasClass("ui-slider")&&t.empty(),t.slider({range:"min",value:i,min:e.min||0,max:e.max||100,step:e.step||1,slide:function(e,t){n.val(t.value).trigger("change")}}),n.on("keyup",function(){t.slider("value",n.val())})})},j.fn.idonate_field_sortable=function(){return this.each(function(){var n=j(this).find(".idonate-sortable");n.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){n.idonate_customizer_refresh()}}),n.find(".idonate-sortable-content").idonate_reload_script()})},j.fn.idonate_field_sorter=function(){return this.each(function(){var i=j(this),e=i.find(".idonate-enabled"),t=i.find(".idonate-disabled"),t=!!t.length&&t;e.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(e,t){var n=t.item.find("input");t.item.parent().hasClass("idonate-enabled")?n.attr("name",n.attr("name").replace("disabled","enabled")):n.attr("name",n.attr("name").replace("enabled","disabled")),i.idonate_customizer_refresh()}}),t&&t.sortable({connectWith:e,placeholder:"ui-sortable-placeholder",update:function(e,t){i.idonate_customizer_refresh()}})})},j.fn.idonate_field_spinner=function(){return this.each(function(){var e=j(this),n=e.find("input"),e=e.find(".ui-button"),i=n.data();e.length&&e.remove(),n.spinner({min:i.min||0,max:i.max||100,step:i.step||1,create:function(e,t){i.unit&&n.after('<span class="ui-button idonate--unit">'+i.unit+"</span>")},spin:function(e,t){n.val(t.value).trigger("change")}})})},j.fn.idonate_field_switcher=function(){return this.each(function(){var n=j(this).find(".idonate--switcher");n.on("click",function(){var e=0,t=n.find("input");n.hasClass("idonate--active")?n.removeClass("idonate--active"):(e=1,n.addClass("idonate--active")),t.val(e).trigger("change")})})},j.fn.idonate_field_tabbed=function(){return this.each(function(){var e=j(this),t=e.find(".idonate-tabbed-nav a"),n=e.find(".idonate-tabbed-content");n.eq(0).idonate_reload_script(),t.on("click",function(e){e.preventDefault();var e=j(this),t=e.index(),t=n.eq(t);e.addClass("idonate-tabbed-active").siblings().removeClass("idonate-tabbed-active"),t.idonate_reload_script(),t.removeClass("hidden").siblings().addClass("hidden")})})},j.fn.idonate_field_typography=function(){return this.each(function(){var x=this,z=j(this),i=[],D=idonate_typography_json.webfonts,t=idonate_typography_json.googlestyles,O=idonate_typography_json.defaultstyles;x.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},x.sanitize_style=function(e){return t[e]||e},x.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",-1===i.indexOf(e=t||n?e+":"+t+n:e)&&WebFont.load({google:{families:[e]}}),i.push(e))},x.append_select_options=function(e,t,a,o,d){e.find("option").not(":first").remove();var r="";j.each(t,function(e,t){var n=t,i=d?a&&-1!==a.indexOf(t)?" selected":"":a&&a===t?" selected":"";"subset"===o?n=x.sanitize_subset(t):"style"===o&&(n=x.sanitize_style(t)),r+='<option value="'+t+'"'+i+">"+n+"</option>"}),e.append(r).trigger("idonate.change").trigger("chosen:updated")},x.init=function(){var o,d,r,l,s,c,f,h,g,p=[],e=z.find(".idonate--typography"),u=z.find(".idonate--type"),v=z.find(".idonate--block-font-style"),m=e.data("unit"),_=e.data("line-height-unit"),t=e.data("exclude")?e.data("exclude").split(","):[],b=(z.find(".idonate--chosen").length&&z.find("select").each(function(){var e=j(this),t=e.parent().find(".chosen-container");t.length&&t.remove(),e.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})}),z.find(".idonate--font-family")),i=b.val(),a=(b.find("option").not(":first-child").remove(),""),y=(j.each(D,function(n,e){t&&-1!==t.indexOf(n)||(a+='<optgroup label="'+e.label+'">',j.each(e.fonts,function(e,t){a+='<option value="'+(t="object"==typeof t?e:t)+'" data-type="'+n+'"'+(t===i?" selected":"")+">"+t+"</option>"}),a+="</optgroup>")}),b.append(a).trigger("chosen:updated"),z.find(".idonate--block-font-style")),w=(y.length&&(o=z.find(".idonate--font-style-select"),d=o.val()?o.val().replace(/normal/g,""):"",o.on("change idonate.change",function(e){var t=o.val(),n=(t=!t&&p&&-1===p.indexOf("normal")?p[0]:t)&&"italic"!==t&&"normal"===t?"normal":"",n=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):n,t=t&&"italic"===t.substr(-6)?"italic":"";z.find(".idonate--font-weight").val(n),z.find(".idonate--font-style").val(t)}),(r=z.find(".idonate--block-extra-styles")).length)&&(l=z.find(".idonate--extra-styles"),s=l.val()),z.find(".idonate--block-subset")),k=(w.length&&(c=z.find(".idonate--subset"),f=c.val(),h=c.data("multiple")||!1),z.find(".idonate--block-backup-font-family")),C=(b.on("change idonate.change",function(e){w.length&&w.addClass("hidden"),r.length&&r.addClass("hidden"),k.length&&k.addClass("hidden");var t,n,i=b.find(":selected"),a=i.val(),i=i.data("type");i&&a?("google"!==i&&"custom"!==i||!k.length||k.removeClass("hidden"),y.length&&(n=O,"google"===i&&D[i].fonts[a][0]?n=D[i].fonts[a][0]:"custom"===i&&D[i].fonts[a]&&(n=D[i].fonts[a]),t=-1!==(p=n).indexOf("normal")?"normal":n[0],t=d&&-1!==n.indexOf(d)?d:t,x.append_select_options(o,n,t,"style"),d=!1,y.removeClass("hidden"),"google"===i)&&r.length&&1<n.length&&(x.append_select_options(l,n,s,"style",!0),s=!1,r.removeClass("hidden")),"google"===i&&w.length&&D[i].fonts[a][1]&&(n=(t=D[i].fonts[a][1]).length<2&&"latin"!==t[0]?t[0]:"",a=f&&-1!==t.indexOf(f)?f:n,a=h&&f?f:a,x.append_select_options(c,t,a,"subset",h),f=!1,w.removeClass("hidden"))):(v.find(":input").val(""),w.length&&(c.find("option").not(":first-child").remove(),c.trigger("chosen:updated")),y.length&&(o.find("option").not(":first-child").remove(),o.trigger("chosen:updated"))),u.val(i)}).trigger("idonate.change"),z.find(".idonate--block-preview"));C.length&&(g=z.find(".idonate--preview"),z.on("change",A.helper.debounce(function(e){C.removeClass("hidden");var t=b.val(),n=z.find(".idonate--font-weight").val(),i=z.find(".idonate--font-style").val(),a=z.find(".idonate--font-size").val(),o=z.find(".idonate--font-variant").val(),d=z.find(".idonate--line-height").val(),r=z.find(".idonate--text-align").val(),l=z.find(".idonate--text-transform").val(),s=z.find(".idonate--text-decoration").val(),c=z.find(".idonate--color").val(),f=z.find(".idonate--word-spacing").val(),h=z.find(".idonate--letter-spacing").val(),p=z.find(".idonate--custom-style").val(),u=("google"===z.find(".idonate--type").val()&&x.load_google_font(t,n,i),{});t&&(u.fontFamily=t),n&&(u.fontWeight=n),i&&(u.fontStyle=i),o&&(u.fontVariant=o),a&&(u.fontSize=a+m),d&&(u.lineHeight=d+_),h&&(u.letterSpacing=h+m),f&&(u.wordSpacing=f+m),r&&(u.textAlign=r),l&&(u.textTransform=l),s&&(u.textDecoration=s),c&&(u.color=c),g.removeAttr("style"),p&&g.attr("style",p),g.css(u)},100)),C.on("click",function(){g.toggleClass("idonate--idonate-black-background");var e=C.find(".idonate--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),C.hasClass("hidden")||z.trigger("change"))},x.init()})},j.fn.idonate_field_upload=function(){return this.each(function(){var t,e=j(this),n=e.find("input"),i=e.find(".idonate--button"),a=e.find(".idonate--remove"),o=e.find(".idonate--preview"),d=e.find(".idonate--src"),r=i.data("library")&&i.data("library").split(",")||"";i.on("click",function(e){e.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&(t||(t=_.wp.media({library:{type:r}})).on("select",function(){var e=t.state().get("selection").first().attributes;r.length&&-1===r.indexOf(e.subtype)&&-1===r.indexOf(e.type)||n.val(e.url).trigger("change")}),t.open())}),a.on("click",function(e){e.preventDefault(),n.val("").trigger("change")}),n.on("change",function(e){var t=n.val();t?a.removeClass("hidden"):a.addClass("hidden"),o.length&&(-1!==j.inArray(t.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(o.removeClass("hidden"),d.attr("src",t)):o.addClass("hidden"))})})},j.fn.idonate_field_wp_editor=function(){return this.each(function(){var e,t,n,i,a,o,d,r;void 0!==_.wp.editor&&void 0!==_.tinyMCEPreInit&&void 0!==_.tinyMCEPreInit.mceInit.idonate_wp_editor&&(t=(e=j(this)).find(".idonate-wp-editor"),n=e.find("textarea"),(e.find(".wp-editor-wrap").length||e.find(".mce-container").length)&&(t.empty(),t.append(n),n.css("display","")),i=A.helper.uid("idonate-editor-"),n.attr("id",i),a={tinymce:_.tinyMCEPreInit.mceInit.idonate_wp_editor,quicktags:_.tinyMCEPreInit.qtInit.idonate_wp_editor},o=t.data("editor-settings"),(r=wp.oldEditor||wp.editor)&&r.hasOwnProperty("autop")&&(wp.editor.autop=r.autop,wp.editor.removep=r.removep,wp.editor.initialize=r.initialize),a.tinymce=j.extend({},a.tinymce,{selector:"#"+i,setup:function(t){t.on("change keyup",function(){var e=o.wpautop?t.getContent():wp.editor.removep(t.getContent());n.val(e).trigger("change")})}}),!1===o.tinymce&&(a.tinymce=!1,t.addClass("idonate-no-tinymce")),!1===o.quicktags&&(a.quicktags=!1,t.addClass("idonate-no-quicktags")),d=setInterval(function(){e.is(":visible")&&(_.wp.editor.initialize(i,a),clearInterval(d))}),o.media_buttons)&&_.idonate_media_buttons&&((r=t.find(".wp-media-buttons")).length?r.find(".idonate-shortcode-button").data("editor-id",i):((r=j(_.idonate_media_buttons)).find(".idonate-shortcode-button").data("editor-id",i),t.prepend(r)))})},j.fn.idonate_confirm=function(){return this.each(function(){j(this).on("click",function(e){var t=j(this).data("confirm")||_.idonate_vars.i18n.confirm;if(!confirm(t))return e.preventDefault(),!1;A.vars.is_confirm=!0,A.vars.form_modified=!1})})},j.fn.serializeObject=function(){var i={};return j.each(this.serializeArray(),function(e,t){var n=t.name,t=t.value;i[n]=i[n]===y?t:j.isArray(i[n])?i[n].concat(t):[i[n],t]}),i},j.fn.idonate_save=function(){return this.each(function(){var i,a=j(this),o=j(".idonate-save"),d=j(".idonate-options"),r=!1;a.on("click",function(e){var t,n;r||(t=a.data("save"),n=a.val(),o.attr("value",t),a.hasClass("idonate-save-ajax")?(e.preventDefault(),d.addClass("idonate-saving"),o.prop("disabled",!0),_.wp.ajax.post("idonate_"+d.data("unique")+"_ajax_save",{data:j("#idonate-form").serializeJSONIDONATE()}).done(function(e){j(".idonate-error").remove(),Object.keys(e.errors).length&&(a='<i class="idonate-label-error idonate-error">!</i>',j.each(e.errors,function(e,t){var e=j('[data-depend-id="'+e+'"]'),n=j('a[href="#tab='+e.closest(".idonate-section").data("section-id")+'"]'),i=n.closest(".idonate-tab-item");e.closest(".idonate-fieldset").append('<p class="idonate-error idonate-error-text">'+t+"</p>"),n.find(".idonate-error").length||n.append(a),i.find(".idonate-arrow .idonate-error").length||i.find(".idonate-arrow").append(a)})),d.removeClass("idonate-saving"),o.prop("disabled",!1).attr("value",n),r=!1,A.vars.form_modified=!1,A.vars.$form_warning.hide(),clearTimeout(i);var a,t=j(".idonate-form-success");t.empty().append(e.notice).fadeIn("fast",function(){i=setTimeout(function(){t.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):A.vars.form_modified=!1),r=!0})})},j.fn.idonate_options=function(){return this.each(function(){var e=j(this),t=e.find(".idonate-content"),n=e.find(".idonate-form-success"),i=e.find(".idonate-form-warning"),a=e.find(".idonate-header .idonate-save");(A.vars.$form_warning=i).length&&(_.onbeforeunload=function(){return!!A.vars.form_modified||y},t.on("change keypress",":input",function(){A.vars.form_modified||(n.hide(),i.fadeIn("fast"),A.vars.form_modified=!0)})),n.hasClass("idonate-form-show")&&setTimeout(function(){n.fadeOut("fast")},1e3),j(b).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return a.trigger("click"),e.preventDefault(),!1})})},j.fn.idonate_taxonomy=function(){return this.each(function(){var e,t,n=j(this),i=n.parents("form");"addtag"===i.attr("id")&&(e=i.find("#submit"),t=n.children(".idonate-field").idonate_clone(),e.on("click",function(){i.find(".form-required").hasClass("form-invalid")||(n.data("inited",!1),n.empty(),n.html(t),t=t.idonate_clone(),n.idonate_reload_script())}))})},j.fn.idonate_shortcode=function(){var m=this;return m.shortcode_parse=function(e,n){var i="";return j.each(e,function(e,t){i+="["+(n=n||e),j.each(t,function(e,t){"content"===e?i=(i+="]")+t+"[/"+n:i+=m.shortcode_tags(e,t)}),i+="]"}),i},m.shortcode_tags=function(e,t){var n="";return""!==t&&("object"!=typeof t||j.isArray(t)?n+=" "+e+'="'+t.toString()+'"':j.each(t,function(e,t){""!==(t="background-image"===e?t.url||"":t)&&(n+=" "+e+'="'+t.toString()+'"')})),n},m.insertAtChars=function(e,t){e=void 0!==e[0].name?e[0]:e;return e.value.length&&void 0!==e.selectionStart?(e.focus(),e.value.substring(0,e.selectionStart)+t+e.value.substring(e.selectionEnd,e.value.length)):(e.focus(),t)},m.send_to_editor=function(e,t){var n;(n="undefined"!=typeof tinymce?tinymce.get(t):n)&&!n.isHidden()?n.execCommand("mceInsertContent",!1,e):(n=j("#"+t)).val(m.insertAtChars(n,e)).trigger("change")},this.each(function(){var a,o,d,n,r,l,s,i,c,f=j(this),h=f.find(".idonate-modal-load"),p=(f.find(".idonate-modal-content"),f.find(".idonate-modal-insert")),u=f.find(".idonate-modal-loading"),t=f.find("select"),g=f.data("modal-id"),v=f.data("nonce");j(b).on("click",'.idonate-shortcode-button[data-modal-id="'+g+'"]',function(e){e.preventDefault(),c=j(this),a=c.data("editor-id")||!1,o=c.data("target-id")||!1,d=c.data("gutenberg-id")||!1,f.removeClass("hidden"),f.hasClass("idonate-shortcode-single")&&r===y&&t.trigger("change")}),t.on("change",function(){var e=j(this),t=e.find(":selected");n=e.val(),r=t.data("shortcode"),l=t.data("view")||"normal",s=t.data("group")||r,h.empty(),n?(u.show(),_.wp.ajax.post("idonate-get-shortcode-"+g,{shortcode_key:n,nonce:v}).done(function(e){u.hide();e=j(e.content).appendTo(h);p.parent().removeClass("hidden"),i=e.find(".idonate--repeat-shortcode").idonate_clone(),e.idonate_reload_script(),e.find(".idonate-fields").idonate_reload_script()})):p.parent().addClass("hidden")}),p.on("click",function(e){if(e.preventDefault(),!p.prop("disabled")&&!p.attr("disabled")){var n="",t=f.find(".idonate-field:not(.idonate-depend-on)").find(":input:not(.ignore)").serializeObjectIDONATE();switch(l){case"contents":var i=r?t[r]:t;j.each(i,function(e,t){e=r||e;n+="["+e+"]"+t+"[/"+e+"]"});break;case"group":n+="["+r,j.each(t[r],function(e,t){n+=m.shortcode_tags(e,t)}),n=(n=(n+="]")+m.shortcode_parse(t[s],s))+("[/"+r+"]");break;case"repeater":n+=m.shortcode_parse(t[s],s);break;default:n+=m.shortcode_parse(t)}n=""===n?"["+r+"]":n,d?(e=_.idonate_gutenberg_props.attributes.hasOwnProperty("shortcode")?_.idonate_gutenberg_props.attributes.shortcode:"",_.idonate_gutenberg_props.setAttributes({shortcode:e+n})):a?m.send_to_editor(n,a):(e=o?j(o):c.parent().find("textarea")).val(m.insertAtChars(e,n)).trigger("change"),f.addClass("hidden")}}),f.on("click",".idonate--repeat-button",function(e){e.preventDefault();var e=f.find(".idonate--repeatable"),t=i.idonate_clone(),n=t.find(".idonate-repeat-remove");t.appendTo(e);t.find(".idonate-fields").idonate_reload_script(),A.helper.name_nested_replace(f.find(".idonate--repeat-shortcode"),s),n.on("click",function(){t.remove(),A.helper.name_nested_replace(f.find(".idonate--repeat-shortcode"),s)})}),f.on("click",".idonate-modal-close, .idonate-modal-overlay",function(){f.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e}),A.funcs.parse_color=function(e){var e=e.replace(/\s+/g,""),t=-1!==e.indexOf("rgba")?parseFloat(100*e.replace(/^.*,(.+)\)/,"$1")):100;return{value:e,transparent:t,rgba:t<100}},j.fn.idonate_color=function(){return this.each(function(){var d,r=j(this),n=A.funcs.parse_color(r.val()),e=!_.idonate_vars.color_palette.length||_.idonate_vars.color_palette;r.hasClass("wp-color-picker")&&r.closest(".wp-picker-container").after(r).remove(),r.wpColorPicker({palettes:e,change:function(e,t){t=t.color.toString();d.removeClass("idonate--transparent-active"),d.find(".idonate--transparent-offset").css("background-color",t),r.val(t).trigger("change")},create:function(){d=r.closest(".wp-picker-container");var i=r.data("a8cIris"),e=j('<div class="idonate--transparent-wrap"><div class="idonate--transparent-slider"></div><div class="idonate--transparent-offset"></div><div class="idonate--transparent-text"></div><div class="idonate--transparent-button">transparent <i class="icofont-toggle-off"></i></div></div>').appendTo(d.find(".wp-picker-holder")),a=e.find(".idonate--transparent-slider"),o=e.find(".idonate--transparent-text"),t=e.find(".idonate--transparent-offset"),e=e.find(".idonate--transparent-button");"transparent"===r.val()&&d.addClass("idonate--transparent-active"),e.on("click",function(){"transparent"!==r.val()?(r.val("transparent").trigger("change").removeClass("iris-error"),d.addClass("idonate--transparent-active")):(r.val(i._color.toString()).trigger("change"),d.removeClass("idonate--transparent-active"))}),a.slider({value:n.transparent,step:1,min:0,max:100,slide:function(e,t){t=parseFloat(t.value/100);i._color._alpha=t,r.wpColorPicker("color",i._color.toString()),o.text(1===t||0===t?"":t)},create:function(){var e=parseFloat(n.transparent/100);o.text(e<1?e:""),t.css("background-color",n.value),d.on("click",".wp-picker-clear",function(){i._color._alpha=1,o.text(""),a.slider("option","value",100),d.removeClass("idonate--transparent-active"),r.trigger("change")}),d.on("click",".wp-picker-default",function(){var e=A.funcs.parse_color(r.data("default-color")),t=parseFloat(e.transparent/100),n=t<1?t:"";i._color._alpha=t,o.text(n),a.slider("option","value",e.transparent),"transparent"===e.value&&(r.removeClass("iris-error"),d.addClass("idonate--transparent-active"))})}})}})})},j.fn.idonate_chosen=function(){return this.each(function(){var n,o,d=j(this),e=d.parent().find(".chosen-container"),t=d.hasClass("idonate-chosen-sortable")||!1,i=d.hasClass("idonate-chosen-ajax")||!1,a=d.attr("multiple")||!1,r=j.extend({allow_single_deselect:!0,disable_search_threshold:10,width:a?"100%":"auto",no_results_text:_.idonate_vars.i18n.no_results_text},d.data("chosen-settings"));e.length&&e.remove(),i?(e=j.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:_.idonate_vars.i18n.typing_text,searching_text:_.idonate_vars.i18n.searching_text,no_results_text:_.idonate_vars.i18n.no_results_text},d.data("chosen-settings")),d.IDONATEAjaxChosen(e)):d.chosen(r),a&&(i=(n=d.parent().find(".idonate-hide-select")).val()||[],d.on("change",function(e,t){t&&t.selected?n.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&n.find('option[value="'+t.deselected+'"]').remove(),_.wp.customize!==y&&0===n.children().length&&n.data("customize-setting-link")&&_.wp.customize.control(n.data("customize-setting-link")).setting.set(""),n.trigger("change")}),d.IDONATEChosenOrder(i,!0)),t&&((o=d.parent().find(".chosen-container").find(".chosen-choices")).bind("mousedown",function(e){j(e.target).is("span")&&e.stopPropagation()}),o.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(e,t){var i="",a=d.data("chosen"),n=d.parent().find(".idonate-hide-select");o.find(".search-choice-close").each(function(){var n=j(this).data("option-array-index");j.each(a.results_data,function(e,t){t.array_index===n&&(i+='<option value="'+t.value+'" selected>'+t.value+"</option>")})}),n.children().remove(),n.append(i),n.trigger("change")}}))})},j.fn.idonate_checkbox=function(){return this.each(function(){var e=j(this),t=e.find(".idonate--input"),n=e.find(".idonate--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},j.fn.idonate_checkbox_all=function(){return this.each(function(){var n=j(this);n.on("click",function(){var e=n.closest(".idonate-field-checkbox").find(":input"),t=!1;e.each(function(){j(this).prop("checked")||(t=!0)}),t?(e.prop("checked","checked"),e.attr("checked","checked")):(e.prop("checked",""),e.removeAttr("checked")),e.first().trigger("change")})})},j.fn.idonate_siblings=function(){return this.each(function(){var t=j(this),e=t.find(".idonate--sibling"),n=t.data("multiple")||!1;e.on("click",function(){var e=j(this);n?(e.hasClass("idonate--active")?(e.removeClass("idonate--active"),e.find("input").prop("checked",!1)):(e.addClass("idonate--active"),e.find("input").prop("checked",!0))).trigger("change"):(t.find("input").prop("checked",!1),e.find("input").prop("checked",!0).trigger("change"),e.addClass("idonate--active").siblings().removeClass("idonate--active"))})})},j.fn.idonate_help=function(){return this.each(function(){var e,t,n=j(this);n.on({mouseenter:function(){e=j('<div class="idonate-tooltip"></div>').html(n.find(".idonate-help-text").html()).appendTo("body"),t=A.vars.is_rtl?n.offset().left+24:n.offset().left-e.outerWidth(),e.css({top:n.offset().top-(e.outerHeight()/2-14),left:t})},mouseleave:function(){e!==y&&e.remove()}})})},j.fn.idonate_customizer_refresh=function(){return this.each(function(){var e=j(this),t=e.closest(".idonate-customize-complex");if(t.length){var n=t.data("unique-id");if(n===y)return;var i=t.find(":input"),t=t.data("option-id"),i=i.serializeObjectIDONATE(),i=!j.isEmptyObject(i)&&i[n]&&i[n][t]?i[n][t]:"",n=_.wp.customize.control(n+"["+t+"]");n.setting._value=null,n.setting.set(i)}else e.find(":input").first().trigger("change");j(b).trigger("idonate-customizer-refresh",e)})},j.fn.idonate_customizer_listen=function(e){var a=j.extend({closest:!1},e);return this.each(function(){var t,e,n,i;_.wp.customize!==y&&(e=(t=a.closest?j(this).closest(".idonate-customize-complex"):j(this)).find(":input"),n=t.data("unique-id"),i=t.data("option-id"),n!==y)&&e.on("change keyup idonate.change",function(){var e=t.find(":input").serializeObjectIDONATE(),e=!j.isEmptyObject(e)&&e[n]&&e[n][i]?e[n][i]:"";_.wp.customize.control(n+"["+i+"]").setting.set(e)})})},j(b).on("expanded",".control-section",function(){var e,t,n=j(this);n.hasClass("open")&&!n.data("inited")&&(e=n.find(".idonate-customize-field"),t=n.find(".idonate-customize-complex"),e.length&&(n.idonate_dependency(),e.idonate_reload_script({dependency:!1}),t.idonate_customizer_listen()),n.data("inited",!0))}),A.vars.$window.on("resize idonate.resize",A.helper.debounce(function(e){(-1<navigator.userAgent.indexOf("AppleWebKit/")?A.vars.$window.width():_.innerWidth)<=782&&!A.vars.onloaded&&(j(".idonate-section").idonate_reload_script(),A.vars.onloaded=!0)},200)).trigger("idonate.resize"),j.fn.idonate_widgets=function(){return this.each(function(){j(b).on("widget-added widget-updated",function(e,t){t=t.find(".idonate-fields");t.length&&t.idonate_reload_script()}),j(b).on("click",".widget-top",function(e){var t=j(this).parent().find(".idonate-fields");t.length&&t.idonate_reload_script()}),j(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".idonate-fields").idonate_reload_script_retry()})})},j.fn.idonate_nav_menu=function(){return this.each(function(){var e=j(this);e.on("click","a.item-edit",function(){j(this).closest("li.menu-item").find(".idonate-fields").idonate_reload_script()}),e.on("sortstop",function(e,t){t.item.find(".idonate-fields").idonate_reload_script_retry()})})},j.fn.idonate_reload_script_retry=function(){return this.each(function(){var e=j(this);e.data("inited")&&e.children(".idonate-field-wp_editor").idonate_field_wp_editor()})},j.fn.idonate_reload_script=function(e){var t=j.extend({dependency:!0},e);return this.each(function(){var e=j(this);e.data("inited")||(e.children(".idonate-field-accordion").idonate_field_accordion(),e.children(".idonate-field-backup").idonate_field_backup(),e.children(".idonate-field-background").idonate_field_background(),e.children(".idonate-field-code_editor").idonate_field_code_editor(),e.children(".idonate-field-date").idonate_field_date(),e.children(".idonate-field-datetime").idonate_field_datetime(),e.children(".idonate-field-fieldset").idonate_field_fieldset(),e.children(".idonate-field-gallery").idonate_field_gallery(),e.children(".idonate-field-group").idonate_field_group(),e.children(".idonate-field-icon").idonate_field_icon(),e.children(".idonate-field-link").idonate_field_link(),e.children(".idonate-field-media").idonate_field_media(),e.children(".idonate-field-map").idonate_field_map(),e.children(".idonate-field-repeater").idonate_field_repeater(),e.children(".idonate-field-slider").idonate_field_slider(),e.children(".idonate-field-sortable").idonate_field_sortable(),e.children(".idonate-field-sorter").idonate_field_sorter(),e.children(".idonate-field-spinner").idonate_field_spinner(),e.children(".idonate-field-switcher").idonate_field_switcher(),e.children(".idonate-field-tabbed").idonate_field_tabbed(),e.children(".idonate-field-typography").idonate_field_typography(),e.children(".idonate-field-upload").idonate_field_upload(),e.children(".idonate-field-wp_editor").idonate_field_wp_editor(),e.children(".idonate-field-box_shadow").find(".idonate-color").idonate_color(),e.children(".idonate-field-border").find(".idonate-color").idonate_color(),e.children(".idonate-field-background").find(".idonate-color").idonate_color(),e.children(".idonate-field-color").find(".idonate-color").idonate_color(),e.children(".idonate-field-color_group").find(".idonate-color").idonate_color(),e.children(".idonate-field-link_color").find(".idonate-color").idonate_color(),e.children(".idonate-field-typography").find(".idonate-color").idonate_color(),e.children(".idonate-field-select").find(".idonate-chosen").idonate_chosen(),e.children(".idonate-field-checkbox").find(".idonate-checkbox").idonate_checkbox(),e.children(".idonate-field-checkbox").find(".idonate-checkbox-all").idonate_checkbox_all(),e.children(".idonate-field-button_set").find(".idonate-siblings").idonate_siblings(),e.children(".idonate-field-image_select").find(".idonate-siblings").idonate_siblings(),e.children(".idonate-field-layout_preset").find(".idonate-siblings").idonate_siblings(),e.children(".idonate-field-palette").find(".idonate-siblings").idonate_siblings(),e.children(".idonate-field").find(".idonate-help").idonate_help(),t.dependency&&e.idonate_dependency(),e.data("inited",!0),j(b).trigger("idonate-reload-script",e))})},j(b).ready(function(){j(".idonate-save").idonate_save(),j(".idonate-options").idonate_options(),j(".idonate-sticky-header").idonate_sticky(),j(".idonate-nav-options").idonate_nav_options(),j(".idonate-nav-metabox").idonate_nav_metabox(),j(".idonate-taxonomy").idonate_taxonomy(),j(".idonate-page-templates").idonate_page_templates(),j(".idonate-post-formats").idonate_post_formats(),j(".idonate-shortcode").idonate_shortcode(),j(".idonate-search").idonate_search(),j(".idonate-confirm").idonate_confirm(),j(".idonate-expand-all").idonate_expand_all(),j(".idonate-onload").idonate_reload_script(),j("#widgets-editor").idonate_widgets(),j("#widgets-right").idonate_widgets(),j("#menu-to-edit").idonate_nav_menu()})}(jQuery,window,document);