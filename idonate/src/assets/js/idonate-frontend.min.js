!function(u){u("#form").length&&u("#form").validate(),u("#blood-request").length&&u("#blood-request").validate(),u("#table_id").length&&u("#table_id").DataTable(),0<u(".donor_wrapper").length&&u(".donors").each(function(){var e,a,o,i=idonate.ajaxurl,c=idonate.nonce;function r(t,n){u("#preloader").show(),u.ajax({type:"POST",url:n,data:{user_id:t,nonce:c,action:"idonate_post_admin_popup_next_prev"},success:function(t){t=u(t).css({opacity:0});u(".idonate_popup_ajax_content").html(t),t.animate({opacity:1}),u("#preloader").hide()}})}u(".donors").on("click",".idonate_popup_modal",function(t){t.preventDefault(),t.stopPropagation();var n,t=u(this).parents(".donor_info").data("id");n=[],u(".donors").find(".donor_info").each(function(){n.push(u(this).data("id"))}),e=function(t,n){for(var e in n)if(n[e]==t)return e;return!1}(t,a=n),o=a.length,u.ajax({type:"POST",url:i,data:{user_id:t,action:"idonate_post_popup",nonce:c},success:function(t){t=u(t).css({opacity:0});u.magnificPopup.open({type:"inline",showCloseBtn:!1,closeBtnInside:!1,enableEscapeKey:!0,closeOnBgClick:!0,items:{src:t}}),t.animate({opacity:1})}}),u(document).off("click",".idonate-popup-button-next").on("click",".idonate-popup-button-next",function(t){t.preventDefault(),t.stopPropagation(),t=e,e=t=o<=++t?0:t,r(a[e],i)}),u(document).off("click",".idonate-popup-button-prev").on("click",".idonate-popup-button-prev",function(t){var n;t.preventDefault(),t.stopPropagation(),t=e,n=o,e=t=--t<0?n-1:t,r(a[e],i)})})}),0<u(".request_wrapper").length&&u(".request").each(function(){var e,a,o,i=idonate.ajaxurl,c=idonate.nonce;function r(t,n){u("#preloader").show(),u.ajax({type:"POST",url:n,data:{post_id:t,nonce:c,action:"idonate_request_popup_next_prev"},success:function(t){t=u(t).css({opacity:0});u(".idonate_popup_ajax_content").html(t),t.animate({opacity:1}),u("#preloader").hide()}})}u(".request").on("click",".idonate_request_popup_modal",function(t){t.preventDefault(),t.stopPropagation();var n,t=u(this).parents(".single-request").data("id");n=[],u(".request").find(".single-request").each(function(){n.push(u(this).data("id"))}),e=function(t,n){for(var e in n)if(n[e]==t)return e;return!1}(t,a=n),o=a.length,u.ajax({type:"POST",url:i,data:{post_id:t,action:"idonate_request_popup_modal",nonce:c},success:function(t){t=u(t).css({opacity:0});u.magnificPopup.open({type:"inline",showCloseBtn:!1,closeBtnInside:!1,enableEscapeKey:!0,closeOnBgClick:!0,items:{src:t}}),t.animate({opacity:1})}}),u(document).off("click",".idonate-popup-button-next").on("click",".idonate-popup-button-next",function(t){t.preventDefault(),t.stopPropagation(),t=e,e=t=o<=++t?0:t,r(a[e],i)}),u(document).off("click",".idonate-popup-button-prev").on("click",".idonate-popup-button-prev",function(t){var n;t.preventDefault(),t.stopPropagation(),t=e,n=o,e=t=--t<0?n-1:t,r(a[e],i)})})}),u(document).on("change",".profilepic",function(){var t,n,e=u(this);e[0].files&&(t=new FileReader,n=u(e.data("target")),t.onload=function(t){n.attr("src",t.target.result)},t.readAsDataURL(e[0].files[0]))}),u("body").on("change",".country",function(){var i=document.getElementById("state");u.ajax({type:"POST",url:idonate.ajaxurl,data:{country:u(this).val(),action:"country_to_states_ajax"},success:function(t){if(all_state=JSON.parse(t),i){var n,e=JSON.parse(i.getAttribute("data-state")),a={};for(n in all_state)e.hasOwnProperty(n)&&(a[n]=all_state[n]);!function(t){for(var n in t)if(t.hasOwnProperty(n))return 1}(a)||(u(".state").empty(),o="",u.each(a,function(t,n){o+='<option value="'+t+'">'+n+"</option>"}),u(".state").append(o))}else{u(".state").empty();var o="";u.each(all_state,function(t,n){o+='<option value="'+t+'">'+n+"</option>"}),u(".state").append(o)}}})}),0<u(".donor_wrapper").length&&u(".donor_wrapper").each(function(){var t=u(this),n=t.data("pagenum_link");function e(n,t){var e=n.find("#bloodgroup").val(),a=n.find("#availability").val(),o=n.find("#country").val(),i=n.find("#state").val(),c=n.find("#city").val(),r=n.find("#name").val();u.ajax({url:idonate.ajaxurl,type:"POST",data:{action:"idonate_search_donors",nonce:idonate.nonce,bloodgroup:e,availability:a,country:o,state:i,city:c,name:r,pagenumLink:t},success:function(t){t.success?n.find(".donors").html(t.data.html):n.find(".donors").html('<h3 class="alert text-center alert-danger">'+t.data.message+"</h3>")}})}t.find("#bloodgroup, #availability, #country, #state").change(function(){e(t,n)}),t.find("#city, #name").on("keyup",function(){e(t,n)}),t.find("#reset-button").click(function(){t.find("#bloodgroup").val(""),t.find("#availability").val(""),t.find("#country").val(""),t.find("#state").val(""),t.find("#city").val(""),t.find("#name").val(""),e(t,n)})}),0<u(".request_wrapper").length&&u(".request_wrapper").each(function(){var t=u(this),n=t.data("pagenum_link");function e(n,t){var e=n.find("#bloodgroup").val(),a=n.find("#country").val(),o=n.find("#state").val(),i=n.find("#city").val(),c=n.find("#name").val(),r=n.find("#start_date").val(),d=n.find("#end_date").val();u.ajax({url:idonate.ajaxurl,type:"POST",data:{action:"idonate_search_request",nonce:idonate.nonce,bloodgroup:e,country:a,state:o,city:i,name:c,start_date:r,end_date:d,pagenumLink:t},success:function(t){t.success?n.find(".request").html(t.data.html):n.find(".request").html('<h3 class="alert text-center alert-danger">'+t.data.message+"</h3>")}})}t.find("#bloodgroup, #country, #state").change(function(){e(t,n)}),t.find("#city, #name, #start_date, #end_date").on("keyup change",function(){e(t,n)}),t.find("#reset-button").click(function(){t.find("#bloodgroup").val(""),t.find("#country").val(""),t.find("#state").val(""),t.find("#city").val(""),t.find("#name").val(""),t.find("#start_date").val(""),t.find("#end_date").val(""),e(t,n)})}),setTimeout(function(){var t=document.getElementById("idonate-response-msg");t&&t.parentNode.removeChild(t)},3e3)}(jQuery);