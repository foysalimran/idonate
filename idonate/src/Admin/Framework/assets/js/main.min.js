!function(e,t,n,i){"use strict";var a=a||{};a.funcs={},a.vars={onloaded:!1,$body:e("body"),$window:e(t),$document:e(n),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:e("body").hasClass("rtl")},a.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,n){var i=RegExp(a.helper.preg_quote(n+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(i,n+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,t,n){var i;return function(){var a=this,o=arguments,d=function(){i=null,n||e.apply(a,o)},r=n&&!i;clearTimeout(i),i=setTimeout(d,t),r&&e.apply(a,o)}}},e.fn.idonate_clone=function(){for(var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),i=t.find("select").add(t.filter("select")),a=0;a<n.length;++a)for(var o=0;o<n[a].options.length;++o)!0===n[a].options[o].selected&&(i[a].options[o].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},e.fn.idonate_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault(),e(".idonate-wrapper").toggleClass("idonate-show-all"),e(".idonate-section").idonate_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.idonate_nav_options=function(){return this.each(function(){var n,i=e(this),a=e(t),o=e("#wpwrap"),d=i.find("a");a.on("hashchange idonate.hashchange",function(){var i,a=t.location.hash.replace("#tab=","")||d.first().attr("href").replace("#tab=",""),r=e('[data-tab-id="'+a+'"]');if(r.length){r.closest(".idonate-tab-item").addClass("idonate-tab-expanded").siblings().removeClass("idonate-tab-expanded"),r.next().is("ul")&&(a=(r=r.next().find("li").first().find("a")).data("tab-id")),d.removeClass("idonate-active"),r.addClass("idonate-active"),n&&n.addClass("hidden");var l=e('[data-section-id="'+a+'"]');l.removeClass("hidden"),l.idonate_reload_script(),e(".idonate-section-id").val(l.index()+1),n=l,o.hasClass("wp-responsive-open")&&(e("html, body").animate({scrollTop:l.offset().top-50},200),o.removeClass("wp-responsive-open"))}}).trigger("idonate.hashchange")})},e.fn.idonate_nav_metabox=function(){return this.each(function(){var t,n=e(this),a=n.find("a"),o=n.parent().find(".idonate-section");a.each(function(n){e(this).on("click",function(d){d.preventDefault();var r=e(this);a.removeClass("idonate-active"),r.addClass("idonate-active"),t!==i&&t.addClass("hidden");var l=o.eq(n);l.removeClass("hidden"),l.idonate_reload_script(),t=l})}),a.first().trigger("click")})},e.fn.idonate_page_templates=function(){this.length&&e(n).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=e(this).val()||"default";e(".idonate-page-templates").removeClass("idonate-metabox-show").addClass("idonate-metabox-hide"),e(".idonate-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("idonate-metabox-hide").addClass("idonate-metabox-show")})},e.fn.idonate_post_formats=function(){this.length&&e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t="0"===t?"default":t,e(".idonate-post-formats").removeClass("idonate-metabox-show").addClass("idonate-metabox-hide"),e(".idonate-post-format-"+t).removeClass("idonate-metabox-hide").addClass("idonate-metabox-show")})},e.fn.idonate_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var t=e(this).val(),n=e(".idonate-wrapper"),i=n.find(".idonate-section").find("> .idonate-field:not(.idonate-depend-on)"),a=i.find("> .idonate-title, .idonate-search-tags");t.length>3?(i.addClass("idonate-metabox-hide"),n.addClass("idonate-search-all"),a.each(function(){var n=e(this);if(n.text().match(RegExp(".*?"+t+".*?","i"))){var i=n.closest(".idonate-field");i.removeClass("idonate-metabox-hide"),i.parent().idonate_reload_script()}})):(i.removeClass("idonate-metabox-hide"),n.removeClass("idonate-search-all"))})})},e.fn.idonate_sticky=function(){return this.each(function(){var n=e(this),i=e(t),a=n.find(".idonate-header-inner"),o=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),d=0,r=!1,l=function(){var e=Math.max(32,n.offset().top-d),t=i.innerWidth();e<=32&&t>782?(a.css({width:n.outerWidth()-o}),n.css({height:n.outerHeight()}).addClass("idonate-sticky")):(a.removeAttr("style"),n.removeAttr("style").removeClass("idonate-sticky"))},s=function(){r||requestAnimationFrame(function(){l(),r=!1}),r=!0},c=function(){d=i.scrollTop(),s()};i.on("scroll resize",c),c()})},e.fn.idonate_dependency=function(){return this.each(function(){var t=e(this),n=t.children("[data-controller]");if(n.length){var i=e.idonate_deps.createRuleset(),o=e.idonate_deps.createRuleset(),d=[],r=[];n.each(function(){var t=e(this),n=t.data("controller").split("|"),a=t.data("condition").split("|"),l=t.data("value").toString().split("|"),s=!!t.data("depend-global"),c=s?o:i;e.each(n,function(e,n){var i=l[e]||"",o=a[e]||a[0];(c=c.createRule('[data-depend-id="'+n+'"]',o,i)).include(t),s?r.push(n):d.push(n)})}),d.length&&e.idonate_deps.enable(t,i,d),r.length&&e.idonate_deps.enable(a.vars.$body,o,r)}})},e.fn.idonate_field_accordion=function(){return this.each(function(){e(this).find(".idonate-accordion-title").on("click",function(){var t=e(this),n=t.find(".idonate-accordion-icon"),i=t.next();n.hasClass("icofont-simple-right")?n.removeClass("icofont-simple-right").addClass("icofont-rounded-down"):n.removeClass("icofont-rounded-down").addClass("icofont-simple-right"),i.data("opened")||(i.idonate_reload_script(),i.data("opened",!0)),i.toggleClass("idonate-accordion-open")})})},e.fn.idonate_field_backup=function(){return this.each(function(){if(i!==t.wp.customize){var n=this,o=e(this),d=(e("body"),o.find(".idonate-import")),r=o.find(".idonate-reset");n.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("idonate_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},r.on("click",function(e){e.preventDefault(),a.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("idonate-reset",{unique:r.data("unique"),nonce:r.data("nonce")}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("idonate_field_backup_notification")}))}),d.on("click",function(e){e.preventDefault(),a.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("idonate-import",{unique:d.data("unique"),nonce:d.data("nonce"),data:o.find(".idonate-import-data").val()}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("idonate_field_backup_notification")}))})}})},e.fn.idonate_field_background=function(){return this.each(function(){e(this).find(".idonate--background-image").idonate_reload_script()})},e.fn.idonate_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=e(this),n=t.find("textarea"),i=t.find(".CodeMirror"),o=n.data("editor");i.length&&i.remove();var d=setInterval(function(){if(t.is(":visible")){var i=CodeMirror.fromTextArea(n[0],o);if("default"!==o.theme&&-1===a.vars.code_themes.indexOf(o.theme)){var r=e("<link>");e("#idonate-codemirror-css").after(r),r.attr({rel:"stylesheet",id:"idonate-codemirror-"+o.theme+"-css",href:o.cdnURL+"/theme/"+o.theme+".min.css",type:"text/css",media:"all"}),a.vars.code_themes.push(o.theme)}CodeMirror.modeURL=o.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(i,o.mode),i.on("change",function(e,t){n.val(i.getValue()).trigger("change")}),clearInterval(d)}})}})},e.fn.idonate_field_date=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".idonate-date-settings").data("settings");i=e.extend({},i,{showAnim:"",beforeShow:function(t,n){e(n.dpDiv).addClass("idonate-datepicker-wrapper")},onClose:function(t,n){e(n.dpDiv).removeClass("idonate-datepicker-wrapper")}}),2===n.length&&(i=e.extend({},i,{onSelect:function(t){e(this),n.first();var a=n.first().attr("id")===e(this).attr("id")?"minDate":"maxDate",o=e.datepicker.parseDate(i.dateFormat,t);n.not(this).datepicker("option",a,o)}})),n.each(function(){var t=e(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(i)})})},e.fn.idonate_field_datetime=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".idonate-datetime-settings").data("settings");i=e.extend({},i,{onReady:function(t,n,i){e(i.calendarContainer).addClass("idonate-flatpickr")}}),2===n.length&&(i=e.extend({},i,{onChange:function(t,i,a){"from"===e(a.element).data("type")?n.last().get(0)._flatpickr.set("minDate",t[0]):n.first().get(0)._flatpickr.set("maxDate",t[0])}})),n.each(function(){e(this).flatpickr(i)})})},e.fn.idonate_field_fieldset=function(){return this.each(function(){e(this).find(".idonate-fieldset-content").idonate_reload_script()})},e.fn.idonate_field_gallery=function(){return this.each(function(){var n,i=e(this),a=i.find(".idonate-edit-gallery"),o=i.find(".idonate-clear-gallery"),d=i.find("ul"),r=i.find("input");i.find("img"),i.on("click",".idonate-button, .idonate-edit-gallery",function(i){var l=e(this),s=r.val(),c=l.hasClass("idonate-edit-gallery")?"edit":"add",f="add"!==c||s.length?"gallery-edit":"gallery";i.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&("gallery"===f?(n=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(n=t.wp.media.gallery.edit('[gallery ids="'+s+'"]'),"add"===c&&n.setState("gallery-library")),n.on("update",function(e){d.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail.url:t.url;return d.append('<li><img src="'+n+'"></li>'),t.id});r.val(t.join(",")).trigger("change"),o.removeClass("hidden"),a.removeClass("hidden")}))}),o.on("click",function(e){e.preventDefault(),d.empty(),r.val("").trigger("change"),o.addClass("hidden"),a.addClass("hidden")})})},e.fn.idonate_field_group=function(){return this.each(function(){var t=e(this),n=t.children(".idonate-fieldset"),i=n.length?n:t,o=i.children(".idonate-cloneable-wrapper"),d=i.children(".idonate-cloneable-hidden"),r=i.children(".idonate-cloneable-max"),l=i.children(".idonate-cloneable-min"),s=o.data("title-by"),c=o.data("title-by-prefix"),f=o.data("field-id"),h=Boolean(Number(o.data("title-number"))),p=parseInt(o.data("max")),u=parseInt(o.data("min"));o.hasClass("ui-accordion")&&o.find(".ui-accordion-header-icon").remove();var v=function(t){t.find(".idonate-cloneable-title-number").each(function(t){e(this).html(e(this).closest(".idonate-cloneable-item").index()+1+".")})};o.accordion({header:"> .idonate-cloneable-item > .idonate-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"idonate-cloneable-header-icon icofont-rounded-right",activeHeader:"idonate-cloneable-header-icon icofont-rounded-down"},activate:function(t,n){var i=n.newPanel,a=n.newHeader;if(i.length&&!i.data("opened")){var o=a.find(".idonate-cloneable-value"),d=[];e.each(s,function(e,t){d.push(i.find('[data-depend-id="'+t+'"]'))}),e.each(d,function(t,n){n.on("change keyup idonate.keyup",function(){var t=[];e.each(d,function(e,n){var i=n.val();i&&t.push(i)}),t.length&&o.text(t.join(c))}).trigger("idonate.keyup")}),i.idonate_reload_script(),i.data("opened",!0),i.data("retry",!1)}else i.data("retry")&&(i.idonate_reload_script_retry(),i.data("retry",!1))}}),o.sortable({axis:"y",handle:".idonate-cloneable-title,.idonate-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){o.accordion({active:!1}),o.sortable("refreshPositions"),t.item.children(".idonate-cloneable-content").data("retry",!0)},update:function(e,t){a.helper.name_nested_replace(o.children(".idonate-cloneable-item"),f),o.idonate_customizer_refresh(),h&&v(o)}}),i.children(".idonate-cloneable-add").on("click",function(e){e.preventDefault();var t=o.children(".idonate-cloneable-item").length;if(l.hide(),p&&t+1>p){r.show();return}var n=d.idonate_clone(!0);n.removeClass("idonate-cloneable-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(f+"[0]",f+"["+t+"]")}),o.append(n),o.accordion("refresh"),o.accordion({active:t}),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0}),h&&v(o)});var g=function(t){t.preventDefault();var n=o.children(".idonate-cloneable-item").length;if(l.hide(),p&&n+1>p){r.show();return}var i=e(this).parent().parent(),d=i.children(".idonate-cloneable-helper").idonate_clone(!0),s=i.children(".idonate-cloneable-title").idonate_clone(),c=i.children(".idonate-cloneable-content").idonate_clone(),u=e('<div class="idonate-cloneable-item" />');u.append(d),u.append(s),u.append(c),o.children().eq(i.index()).after(u),a.helper.name_nested_replace(o.children(".idonate-cloneable-item"),f),o.accordion("refresh"),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0}),h&&v(o)};o.children(".idonate-cloneable-item").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-clone",g),i.children(".idonate-cloneable-hidden").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-clone",g);var m=function(t){t.preventDefault();var n=o.children(".idonate-cloneable-item").length;if(r.hide(),l.hide(),u&&n-1<u){l.show();return}e(this).closest(".idonate-cloneable-item").remove(),a.helper.name_nested_replace(o.children(".idonate-cloneable-item"),f),o.idonate_customizer_refresh(),h&&v(o)};o.children(".idonate-cloneable-item").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-remove",m),i.children(".idonate-cloneable-hidden").children(".idonate-cloneable-helper").on("click",".idonate-cloneable-remove",m)})},e.fn.idonate_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".idonate-icon-add",function(i){i.preventDefault();var o=e(this),d=e("#idonate-modal-icon");d.removeClass("hidden"),a.vars.$icon_target=n,a.vars.icon_modal_loaded||(d.find(".idonate-modal-loading").show(),t.wp.ajax.post("idonate-get-icons",{nonce:o.data("nonce")}).done(function(t){d.find(".idonate-modal-loading").hide(),a.vars.icon_modal_loaded=!0;var n=d.find(".idonate-modal-load").html(t.content);n.on("click","i",function(t){t.preventDefault();var n=e(this).attr("title");a.vars.$icon_target.find(".idonate-icon-preview i").removeAttr("class").addClass(n),a.vars.$icon_target.find(".idonate-icon-preview").removeClass("hidden"),a.vars.$icon_target.find(".idonate-icon-remove").removeClass("hidden"),a.vars.$icon_target.find("input").val(n).trigger("change"),d.addClass("hidden")}),d.on("change keyup",".idonate-icon-search",function(){var t=e(this).val();n.find("i").each(function(){var n=e(this);0>n.attr("title").search(RegExp(t,"i"))?n.hide():n.show()})}),d.on("click",".idonate-modal-close, .idonate-modal-overlay",function(){d.addClass("hidden")})}).fail(function(e){d.find(".idonate-modal-loading").hide(),d.find(".idonate-modal-load").html(e.error),d.on("click",function(){d.addClass("hidden")})}))}),n.on("click",".idonate-icon-remove",function(t){t.preventDefault(),n.find(".idonate-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.idonate_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var t=e(this),n=t.find(".idonate--map-osm"),i=t.find(".idonate--map-search input"),a=t.find(".idonate--latitude"),o=t.find(".idonate--longitude"),d=t.find(".idonate--zoom"),r=n.data("map"),l=L.map(n.get(0),r);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(l);var s=L.marker(r.center,{draggable:!0}).addTo(l),c=function(e){a.val(e.lat),o.val(e.lng),d.val(l.getZoom())};l.on("click",function(e){s.setLatLng(e.latlng),c(e.latlng)}),l.on("zoom",function(){c(s.getLatLng())}),s.on("drag",function(){c(s.getLatLng())}),i.length||(i=e('[data-depend-id="'+t.find(".idonate--address-field").data("address-field")+'"]'));var f={};i.autocomplete({source:function(t,n){var i=t.term;if(i in f){n(f[i]);return}e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:i},function(e){var t;t=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],f[i]=t,n(t)})},select:function(e,t){if("no-data"===t.item.value)return!1;var n=L.latLng(t.item.lat,t.item.lon);l.panTo(n),s.setLatLng(n),c(n)},create:function(t,n){e(this).autocomplete("widget").addClass("idonate-map-ui-autocomplate")}});var h=function(){var e=L.latLng(a.val(),o.val());l.panTo(e),s.setLatLng(e)};a.on("change",h),o.on("change",h)}})},e.fn.idonate_field_link=function(){return this.each(function(){var n=e(this),i=n.find(".idonate--link"),o=n.find(".idonate--add"),d=n.find(".idonate--edit"),r=n.find(".idonate--remove"),l=n.find(".idonate--result"),s=a.helper.uid("idonate-wplink-textarea-");o.on("click",function(e){e.preventDefault(),t.wpLink.open(s)}),d.on("click",function(t){t.preventDefault(),o.trigger("click"),e("#wp-link-url").val(n.find(".idonate--url").val()),e("#wp-link-text").val(n.find(".idonate--text").val()),e("#wp-link-target").prop("checked","_blank"===n.find(".idonate--target").val())}),r.on("click",function(e){e.preventDefault(),n.find(".idonate--url").val("").trigger("change"),n.find(".idonate--text").val(""),n.find(".idonate--target").val(""),o.removeClass("hidden"),d.addClass("hidden"),r.addClass("hidden"),l.parent().addClass("hidden")}),i.attr("id",s).on("change",function(){var i=t.wpLink.getAttrs(),a=i.href,s=e("#wp-link-text").val(),c=i.target?i.target:"";n.find(".idonate--url").val(a).trigger("change"),n.find(".idonate--text").val(s),n.find(".idonate--target").val(c),l.html('{url:"'+a+'", text:"'+s+'", target:"'+c+'"}'),o.addClass("hidden"),d.removeClass("hidden"),r.removeClass("hidden"),l.parent().removeClass("hidden")})})},e.fn.idonate_field_media=function(){return this.each(function(){var n,i=e(this),a=i.find(".idonate--button"),o=i.find(".idonate--remove"),d=a.data("library")&&a.data("library").split(",")||"",r=!!i.hasClass("idonate-assign-field-background")&&i.closest(".idonate-field-background").find(".idonate--auto-attributes");a.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:d}})).on("select",function(){var e,t=n.state().get("selection").first().attributes,l=a.data("preview-size")||"thumbnail";(!d.length||-1!==d.indexOf(t.subtype)||-1!==d.indexOf(t.type))&&(i.find(".idonate--id").val(t.id),i.find(".idonate--width").val(t.width),i.find(".idonate--height").val(t.height),i.find(".idonate--alt").val(t.alt),i.find(".idonate--title").val(t.title),i.find(".idonate--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===l?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,r&&r.removeClass("idonate--attributes-hidden"),o.removeClass("hidden"),i.find(".idonate--preview").removeClass("hidden"),i.find(".idonate--src").attr("src",e),i.find(".idonate--thumbnail").val(e),i.find(".idonate--url").val(t.url).trigger("change"))}),n.open()}}),o.on("click",function(e){e.preventDefault(),r&&r.addClass("idonate--attributes-hidden"),o.addClass("hidden"),i.find("input").val(""),i.find(".idonate--preview").addClass("hidden"),i.find(".idonate--url").trigger("change")})})},e.fn.idonate_field_repeater=function(){return this.each(function(){var t=e(this),n=t.children(".idonate-fieldset"),i=n.length?n:t,o=i.children(".idonate-repeater-wrapper"),d=i.children(".idonate-repeater-hidden"),r=i.children(".idonate-repeater-max"),l=i.children(".idonate-repeater-min"),s=o.data("field-id"),c=parseInt(o.data("max")),f=parseInt(o.data("min"));o.children(".idonate-repeater-item").children(".idonate-repeater-content").idonate_reload_script(),o.sortable({axis:"y",handle:".idonate-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){a.helper.name_nested_replace(o.children(".idonate-repeater-item"),s),o.idonate_customizer_refresh(),t.item.idonate_reload_script_retry()}}),i.children(".idonate-repeater-add").on("click",function(e){e.preventDefault();var t=o.children(".idonate-repeater-item").length;if(l.hide(),c&&t+1>c){r.show();return}var n=d.idonate_clone(!0);n.removeClass("idonate-repeater-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(s+"[0]",s+"["+t+"]")}),o.append(n),n.children(".idonate-repeater-content").idonate_reload_script(),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0})});var h=function(t){t.preventDefault();var n=o.children(".idonate-repeater-item").length;if(l.hide(),c&&n+1>c){r.show();return}var i=e(this).parent().parent().parent(),d=i.children(".idonate-repeater-content").idonate_clone(),f=i.children(".idonate-repeater-helper").idonate_clone(!0),h=e('<div class="idonate-repeater-item" />');h.append(d),h.append(f),o.children().eq(i.index()).after(h),h.children(".idonate-repeater-content").idonate_reload_script(),a.helper.name_nested_replace(o.children(".idonate-repeater-item"),s),o.idonate_customizer_refresh(),o.idonate_customizer_listen({closest:!0})};o.children(".idonate-repeater-item").children(".idonate-repeater-helper").on("click",".idonate-repeater-clone",h),i.children(".idonate-repeater-hidden").children(".idonate-repeater-helper").on("click",".idonate-repeater-clone",h);var p=function(t){t.preventDefault();var n=o.children(".idonate-repeater-item").length;if(r.hide(),l.hide(),f&&n-1<f){l.show();return}e(this).closest(".idonate-repeater-item").remove(),a.helper.name_nested_replace(o.children(".idonate-repeater-item"),s),o.idonate_customizer_refresh()};o.children(".idonate-repeater-item").children(".idonate-repeater-helper").on("click",".idonate-repeater-remove",p),i.children(".idonate-repeater-hidden").children(".idonate-repeater-helper").on("click",".idonate-repeater-remove",p)})},e.fn.idonate_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".idonate-slider-ui"),a=n.data(),o=n.val()||0;i.hasClass("ui-slider")&&i.empty(),i.slider({range:"min",value:o,min:a.min||0,max:a.max||100,step:a.step||1,slide:function(e,t){n.val(t.value).trigger("change")}}),n.on("keyup",function(){i.slider("value",n.val())})})},e.fn.idonate_field_sortable=function(){return this.each(function(){var t=e(this).find(".idonate-sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.idonate_customizer_refresh()}}),t.find(".idonate-sortable-content").idonate_reload_script()})},e.fn.idonate_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".idonate-enabled"),i=t.find(".idonate-disabled"),a=!!i.length&&i;n.sortable({connectWith:a,placeholder:"ui-sortable-placeholder",update:function(e,n){var i=n.item.find("input");n.item.parent().hasClass("idonate-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),t.idonate_customizer_refresh()}}),a&&a.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,n){t.idonate_customizer_refresh()}})})},e.fn.idonate_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".ui-button"),a=n.data();i.length&&i.remove(),n.spinner({min:a.min||0,max:a.max||100,step:a.step||1,create:function(e,t){a.unit&&n.after('<span class="ui-button idonate--unit">'+a.unit+"</span>")},spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.idonate_field_switcher=function(){return this.each(function(){var t=e(this).find(".idonate--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("idonate--active")?t.removeClass("idonate--active"):(e=1,t.addClass("idonate--active")),n.val(e).trigger("change")})})},e.fn.idonate_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".idonate-tabbed-nav a"),i=t.find(".idonate-tabbed-content");i.eq(0).idonate_reload_script(),n.on("click",function(t){t.preventDefault();var n=e(this),a=n.index(),o=i.eq(a);n.addClass("idonate-tabbed-active").siblings().removeClass("idonate-tabbed-active"),o.idonate_reload_script(),o.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.idonate_field_typography=function(){return this.each(function(){var t=this,n=e(this),i=[],o=idonate_typography_json.webfonts,d=idonate_typography_json.googlestyles,r=idonate_typography_json.defaultstyles;t.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},t.sanitize_style=function(e){return d[e]?d[e]:e},t.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},t.append_select_options=function(n,i,a,o,d){n.find("option").not(":first").remove();var r="";e.each(i,function(e,n){var i,l=n;i=d?a&&-1!==a.indexOf(n)?" selected":"":a&&a===n?" selected":"","subset"===o?l=t.sanitize_subset(n):"style"===o&&(l=t.sanitize_style(n)),r+='<option value="'+n+'"'+i+">"+l+"</option>"}),n.append(r).trigger("idonate.change").trigger("chosen:updated")},t.init=function(){var i=[],d=n.find(".idonate--typography"),l=n.find(".idonate--type"),s=n.find(".idonate--block-font-style"),c=d.data("unit"),f=d.data("line-height-unit"),h=d.data("exclude")?d.data("exclude").split(","):[];n.find(".idonate--chosen").length&&n.find("select").each(function(){var t=e(this),n=t.parent().find(".chosen-container");n.length&&n.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var p=n.find(".idonate--font-family"),u=p.val();p.find("option").not(":first-child").remove();var v="";e.each(o,function(t,n){(!h||-1===h.indexOf(t))&&(v+='<optgroup label="'+n.label+'">',e.each(n.fonts,function(e,n){var i=(n="object"==typeof n?e:n)===u?" selected":"";v+='<option value="'+n+'" data-type="'+t+'"'+i+">"+n+"</option>"}),v+="</optgroup>")}),p.append(v).trigger("chosen:updated");var g=n.find(".idonate--block-font-style");if(g.length){var m=n.find(".idonate--font-style-select"),b=m.val()?m.val().replace(/normal/g,""):"";m.on("change idonate.change",function(e){var t=m.val();!t&&i&&-1===i.indexOf("normal")&&(t=i[0]);var a=t&&"italic"!==t&&"normal"===t?"normal":"",o=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):a,d=t&&"italic"===t.substr(-6)?"italic":"";n.find(".idonate--font-weight").val(o),n.find(".idonate--font-style").val(d)});var y=n.find(".idonate--block-extra-styles");if(y.length)var k=n.find(".idonate--extra-styles"),w=k.val()}var C=n.find(".idonate--block-subset");if(C.length)var x=n.find(".idonate--subset"),$=x.val(),_=x.data("multiple")||!1;var z=n.find(".idonate--block-backup-font-family");p.on("change idonate.change",function(e){C.length&&C.addClass("hidden"),y.length&&y.addClass("hidden"),z.length&&z.addClass("hidden");var n=p.find(":selected"),a=n.val(),d=n.data("type");if(d&&a){if(("google"===d||"custom"===d)&&z.length&&z.removeClass("hidden"),g.length){var c=r;"google"===d&&o[d].fonts[a][0]?c=o[d].fonts[a][0]:"custom"===d&&o[d].fonts[a]&&(c=o[d].fonts[a]),i=c;var f=-1!==c.indexOf("normal")?"normal":c[0],h=b&&-1!==c.indexOf(b)?b:f;t.append_select_options(m,c,h,"style"),b=!1,g.removeClass("hidden"),"google"===d&&y.length&&c.length>1&&(t.append_select_options(k,c,w,"style",!0),w=!1,y.removeClass("hidden"))}if("google"===d&&C.length&&o[d].fonts[a][1]){var u=o[d].fonts[a][1],v=u.length<2&&"latin"!==u[0]?u[0]:"",D=$&&-1!==u.indexOf($)?$:v;D=_&&$?$:D,t.append_select_options(x,u,D,"subset",_),$=!1,C.removeClass("hidden")}}else s.find(":input").val(""),C.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),g.length&&(m.find("option").not(":first-child").remove(),m.trigger("chosen:updated"));l.val(d)}).trigger("idonate.change");var D=n.find(".idonate--block-preview");if(D.length){var O=n.find(".idonate--preview");n.on("change",a.helper.debounce(function(e){D.removeClass("hidden");var i=p.val(),a=n.find(".idonate--font-weight").val(),o=n.find(".idonate--font-style").val(),d=n.find(".idonate--font-size").val(),r=n.find(".idonate--font-variant").val(),l=n.find(".idonate--line-height").val(),s=n.find(".idonate--text-align").val(),h=n.find(".idonate--text-transform").val(),u=n.find(".idonate--text-decoration").val(),v=n.find(".idonate--color").val(),g=n.find(".idonate--word-spacing").val(),m=n.find(".idonate--letter-spacing").val(),b=n.find(".idonate--custom-style").val();"google"===n.find(".idonate--type").val()&&t.load_google_font(i,a,o);var y={};i&&(y.fontFamily=i),a&&(y.fontWeight=a),o&&(y.fontStyle=o),r&&(y.fontVariant=r),d&&(y.fontSize=d+c),l&&(y.lineHeight=l+f),m&&(y.letterSpacing=m+c),g&&(y.wordSpacing=g+c),s&&(y.textAlign=s),h&&(y.textTransform=h),u&&(y.textDecoration=u),v&&(y.color=v),O.removeAttr("style"),b&&O.attr("style",b),O.css(y)},100)),D.on("click",function(){O.toggleClass("idonate--idonate-black-background");var e=D.find(".idonate--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),D.hasClass("hidden")||n.trigger("change")}},t.init()})},e.fn.idonate_field_upload=function(){return this.each(function(){var n,i=e(this),a=i.find("input"),o=i.find(".idonate--button"),d=i.find(".idonate--remove"),r=i.find(".idonate--preview"),l=i.find(".idonate--src"),s=o.data("library")&&o.data("library").split(",")||"";o.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:s}})).on("select",function(){var e=n.state().get("selection").first().attributes;(!s.length||-1!==s.indexOf(e.subtype)||-1!==s.indexOf(e.type))&&a.val(e.url).trigger("change")}),n.open()}}),d.on("click",function(e){e.preventDefault(),a.val("").trigger("change")}),a.on("change",function(t){var n=a.val();n?d.removeClass("hidden"):d.addClass("hidden"),r.length&&(-1!==e.inArray(n.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(r.removeClass("hidden"),l.attr("src",n)):r.addClass("hidden"))})})},e.fn.idonate_field_wp_editor=function(){return this.each(function(){if(void 0!==t.wp.editor&&void 0!==t.tinyMCEPreInit&&void 0!==t.tinyMCEPreInit.mceInit.idonate_wp_editor){var n=e(this),i=n.find(".idonate-wp-editor"),o=n.find("textarea");(n.find(".wp-editor-wrap").length||n.find(".mce-container").length)&&(i.empty(),i.append(o),o.css("display",""));var d=a.helper.uid("idonate-editor-");o.attr("id",d);var r={tinymce:t.tinyMCEPreInit.mceInit.idonate_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.idonate_wp_editor},l=i.data("editor-settings"),s=wp.oldEditor?wp.oldEditor:wp.editor;s&&s.hasOwnProperty("autop")&&(wp.editor.autop=s.autop,wp.editor.removep=s.removep,wp.editor.initialize=s.initialize);var c=function(e){e.on("change keyup",function(){var t=l.wpautop?e.getContent():wp.editor.removep(e.getContent());o.val(t).trigger("change")})};r.tinymce=e.extend({},r.tinymce,{selector:"#"+d,setup:c}),!1===l.tinymce&&(r.tinymce=!1,i.addClass("idonate-no-tinymce")),!1===l.quicktags&&(r.quicktags=!1,i.addClass("idonate-no-quicktags"));var f=setInterval(function(){n.is(":visible")&&(t.wp.editor.initialize(d,r),clearInterval(f))});if(l.media_buttons&&t.idonate_media_buttons){var h=i.find(".wp-media-buttons");if(h.length)h.find(".idonate-shortcode-button").data("editor-id",d);else{var p=e(t.idonate_media_buttons);p.find(".idonate-shortcode-button").data("editor-id",d),i.prepend(p)}}}})},e.fn.idonate_confirm=function(){return this.each(function(){e(this).on("click",function(n){var i=e(this).data("confirm")||t.idonate_vars.i18n.confirm;if(!confirm(i))return n.preventDefault(),!1;a.vars.is_confirm=!0,a.vars.form_modified=!1})})},e.fn.serializeObject=function(){var t={};return e.each(this.serializeArray(),function(n,a){var o=a.name,d=a.value;t[o]=i===t[o]?d:e.isArray(t[o])?t[o].concat(d):[t[o],d]}),t},e.fn.idonate_save=function(){return this.each(function(){var n,i=e(this),o=e(".idonate-save"),d=e(".idonate-options"),r=!1;i.on("click",function(l){if(!r){var s=i.data("save"),c=i.val();o.attr("value",s),i.hasClass("idonate-save-ajax")?(l.preventDefault(),d.addClass("idonate-saving"),o.prop("disabled",!0),t.wp.ajax.post("idonate_"+d.data("unique")+"_ajax_save",{data:e("#idonate-form").serializeJSONIDONATE()}).done(function(t){if(e(".idonate-error").remove(),Object.keys(t.errors).length){var i='<i class="idonate-label-error idonate-error">!</i>';e.each(t.errors,function(t,n){var a=e('[data-depend-id="'+t+'"]'),o=e('a[href="#tab='+a.closest(".idonate-section").data("section-id")+'"]'),d=o.closest(".idonate-tab-item");a.closest(".idonate-fieldset").append('<p class="idonate-error idonate-error-text">'+n+"</p>"),o.find(".idonate-error").length||o.append(i),d.find(".idonate-arrow .idonate-error").length||d.find(".idonate-arrow").append(i)})}d.removeClass("idonate-saving"),o.prop("disabled",!1).attr("value",c),r=!1,a.vars.form_modified=!1,a.vars.$form_warning.hide(),clearTimeout(n);var l=e(".idonate-form-success");l.empty().append(t.notice).fadeIn("fast",function(){n=setTimeout(function(){l.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):a.vars.form_modified=!1}r=!0})})},e.fn.idonate_options=function(){return this.each(function(){var o=e(this),d=o.find(".idonate-content"),r=o.find(".idonate-form-success"),l=o.find(".idonate-form-warning"),s=o.find(".idonate-header .idonate-save");a.vars.$form_warning=l,l.length&&(t.onbeforeunload=function(){return!!a.vars.form_modified||i},d.on("change keypress",":input",function(){a.vars.form_modified||(r.hide(),l.fadeIn("fast"),a.vars.form_modified=!0)})),r.hasClass("idonate-form-show")&&setTimeout(function(){r.fadeOut("fast")},1e3),e(n).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return s.trigger("click"),e.preventDefault(),!1})})},e.fn.idonate_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if("addtag"===n.attr("id")){var i=n.find("#submit"),a=t.children(".idonate-field").idonate_clone();i.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(t.data("inited",!1),t.empty(),t.html(a),a=a.idonate_clone(),t.idonate_reload_script())})}})},e.fn.idonate_shortcode=function(){var o=this;return o.shortcode_parse=function(t,n){var i="";return e.each(t,function(t,a){i+="["+(n=n||t),e.each(a,function(e,t){"content"===e?(i+="]",i+=t,i+="[/"+n):i+=o.shortcode_tags(e,t)}),i+="]"}),i},o.shortcode_tags=function(t,n){var i="";return""!==n&&("object"!=typeof n||e.isArray(n)?i+=" "+t+'="'+n.toString()+'"':e.each(n,function(e,t){"background-image"===e&&(t=t.url?t.url:""),""!==t&&(i+=" "+e+'="'+t.toString()+'"')})),i},o.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},o.send_to_editor=function(t,n){var i;if("undefined"!=typeof tinymce&&(i=tinymce.get(n)),i&&!i.isHidden())i.execCommand("mceInsertContent",!1,t);else{var a=e("#"+n);a.val(o.insertAtChars(a,t)).trigger("change")}},this.each(function(){var d,r,l,s,c,f,h,p,u,v=e(this),g=v.find(".idonate-modal-load"),m=(v.find(".idonate-modal-content"),v.find(".idonate-modal-insert")),b=v.find(".idonate-modal-loading"),y=v.find("select"),k=v.data("modal-id"),w=v.data("nonce");e(n).on("click",'.idonate-shortcode-button[data-modal-id="'+k+'"]',function(t){t.preventDefault(),d=(u=e(this)).data("editor-id")||!1,r=u.data("target-id")||!1,l=u.data("gutenberg-id")||!1,v.removeClass("hidden"),v.hasClass("idonate-shortcode-single")&&c===i&&y.trigger("change")}),y.on("change",function(){var n=e(this),i=n.find(":selected");s=n.val(),c=i.data("shortcode"),f=i.data("view")||"normal",h=i.data("group")||c,g.empty(),s?(b.show(),t.wp.ajax.post("idonate-get-shortcode-"+k,{shortcode_key:s,nonce:w}).done(function(t){b.hide();var n=e(t.content).appendTo(g);m.parent().removeClass("hidden"),p=n.find(".idonate--repeat-shortcode").idonate_clone(),n.idonate_reload_script(),n.find(".idonate-fields").idonate_reload_script()})):m.parent().addClass("hidden")}),m.on("click",function(n){if(n.preventDefault(),!(m.prop("disabled")||m.attr("disabled"))){var i="",a=v.find(".idonate-field:not(.idonate-depend-on)").find(":input:not(.ignore)").serializeObjectIDONATE();switch(f){case"contents":var s=c?a[c]:a;e.each(s,function(e,t){var n=c||e;i+="["+n+"]"+t+"[/"+n+"]"});break;case"group":i+="["+c,e.each(a[c],function(e,t){i+=o.shortcode_tags(e,t)}),i+="]",i+=o.shortcode_parse(a[h],h),i+="[/"+c+"]";break;case"repeater":i+=o.shortcode_parse(a[h],h);break;default:i+=o.shortcode_parse(a)}if(i=""===i?"["+c+"]":i,l){var p=t.idonate_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.idonate_gutenberg_props.attributes.shortcode:"";t.idonate_gutenberg_props.setAttributes({shortcode:p+i})}else if(d)o.send_to_editor(i,d);else{var g=r?e(r):u.parent().find("textarea");g.val(o.insertAtChars(g,i)).trigger("change")}v.addClass("hidden")}}),v.on("click",".idonate--repeat-button",function(e){e.preventDefault();var t=v.find(".idonate--repeatable"),n=p.idonate_clone(),i=n.find(".idonate-repeat-remove");n.appendTo(t),n.find(".idonate-fields").idonate_reload_script(),a.helper.name_nested_replace(v.find(".idonate--repeat-shortcode"),h),i.on("click",function(){n.remove(),a.helper.name_nested_replace(v.find(".idonate--repeat-shortcode"),h)})}),v.on("click",".idonate-modal-close, .idonate-modal-overlay",function(){v.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),a.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},e.fn.idonate_color=function(){return this.each(function(){var n,i=e(this),o=a.funcs.parse_color(i.val()),d=!t.idonate_vars.color_palette.length||t.idonate_vars.color_palette;i.hasClass("wp-color-picker")&&i.closest(".wp-picker-container").after(i).remove(),i.wpColorPicker({palettes:d,change:function(e,t){var a=t.color.toString();n.removeClass("idonate--transparent-active"),n.find(".idonate--transparent-offset").css("background-color",a),i.val(a).trigger("change")},create:function(){n=i.closest(".wp-picker-container");var t=i.data("a8cIris"),d=e('<div class="idonate--transparent-wrap"><div class="idonate--transparent-slider"></div><div class="idonate--transparent-offset"></div><div class="idonate--transparent-text"></div><div class="idonate--transparent-button">transparent <i class="icofont-toggle-off"></i></div></div>').appendTo(n.find(".wp-picker-holder")),r=d.find(".idonate--transparent-slider"),l=d.find(".idonate--transparent-text"),s=d.find(".idonate--transparent-offset"),c=d.find(".idonate--transparent-button");"transparent"===i.val()&&n.addClass("idonate--transparent-active"),c.on("click",function(){"transparent"!==i.val()?(i.val("transparent").trigger("change").removeClass("iris-error"),n.addClass("idonate--transparent-active")):(i.val(t._color.toString()).trigger("change"),n.removeClass("idonate--transparent-active"))}),r.slider({value:o.transparent,step:1,min:0,max:100,slide:function(e,n){var a=parseFloat(n.value/100);t._color._alpha=a,i.wpColorPicker("color",t._color.toString()),l.text(1===a||0===a?"":a)},create:function(){var e=parseFloat(o.transparent/100);l.text(e<1?e:""),s.css("background-color",o.value),n.on("click",".wp-picker-clear",function(){t._color._alpha=1,l.text(""),r.slider("option","value",100),n.removeClass("idonate--transparent-active"),i.trigger("change")}),n.on("click",".wp-picker-default",function(){var e=a.funcs.parse_color(i.data("default-color")),o=parseFloat(e.transparent/100);t._color._alpha=o,l.text(o<1?o:""),r.slider("option","value",e.transparent),"transparent"===e.value&&(i.removeClass("iris-error"),n.addClass("idonate--transparent-active"))})}})}})})},e.fn.idonate_chosen=function(){return this.each(function(){var n=e(this),a=n.parent().find(".chosen-container"),o=n.hasClass("idonate-chosen-sortable")||!1,d=n.hasClass("idonate-chosen-ajax")||!1,r=n.attr("multiple")||!1,l=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:r?"100%":"auto",no_results_text:t.idonate_vars.i18n.no_results_text},n.data("chosen-settings"));if(a.length&&a.remove(),d){var s=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:t.idonate_vars.i18n.typing_text,searching_text:t.idonate_vars.i18n.searching_text,no_results_text:t.idonate_vars.i18n.no_results_text},n.data("chosen-settings"));n.IDONATEAjaxChosen(s)}else n.chosen(l);if(r){var c=n.parent().find(".idonate-hide-select"),f=c.val()||[];n.on("change",function(e,n){n&&n.selected?c.append('<option value="'+n.selected+'" selected="selected">'+n.selected+"</option>"):n&&n.deselected&&c.find('option[value="'+n.deselected+'"]').remove(),i!==t.wp.customize&&0===c.children().length&&c.data("customize-setting-link")&&t.wp.customize.control(c.data("customize-setting-link")).setting.set(""),c.trigger("change")}),n.IDONATEChosenOrder(f,!0)}if(o){var h=n.parent().find(".chosen-container").find(".chosen-choices");h.bind("mousedown",function(t){e(t.target).is("span")&&t.stopPropagation()}),h.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(t,i){var a="",o=n.data("chosen"),d=n.parent().find(".idonate-hide-select");h.find(".search-choice-close").each(function(){var t=e(this).data("option-array-index");e.each(o.results_data,function(e,n){n.array_index===t&&(a+='<option value="'+n.value+'" selected>'+n.value+"</option>")})}),d.children().remove(),d.append(a),d.trigger("change")}})}})},e.fn.idonate_checkbox=function(){return this.each(function(){var t=e(this),n=t.find(".idonate--input"),i=t.find(".idonate--checkbox");i.on("click",function(){n.val(Number(i.prop("checked"))).trigger("change")})})},e.fn.idonate_checkbox_all=function(){return this.each(function(){var t=e(this);t.on("click",function(){var n=t.closest(".idonate-field-checkbox").find(":input"),i=!1;n.each(function(){e(this).prop("checked")||(i=!0)}),i?(n.prop("checked","checked"),n.attr("checked","checked")):(n.prop("checked",""),n.removeAttr("checked")),n.first().trigger("change")})})},e.fn.idonate_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".idonate--sibling"),i=t.data("multiple")||!1;n.on("click",function(){var n=e(this);i?n.hasClass("idonate--active")?(n.removeClass("idonate--active"),n.find("input").prop("checked",!1).trigger("change")):(n.addClass("idonate--active"),n.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),n.find("input").prop("checked",!0).trigger("change"),n.addClass("idonate--active").siblings().removeClass("idonate--active"))})})},e.fn.idonate_help=function(){return this.each(function(){var t,n,o=e(this);o.on({mouseenter:function(){t=e('<div class="idonate-tooltip"></div>').html(o.find(".idonate-help-text").html()).appendTo("body"),n=a.vars.is_rtl?o.offset().left+24:o.offset().left-t.outerWidth(),t.css({top:o.offset().top-(t.outerHeight()/2-14),left:n})},mouseleave:function(){t!==i&&t.remove()}})})},e.fn.idonate_customizer_refresh=function(){return this.each(function(){var a=e(this),o=a.closest(".idonate-customize-complex");if(o.length){var d=o.data("unique-id");if(d===i)return;var r=o.find(":input"),l=o.data("option-id"),s=r.serializeObjectIDONATE(),c=!e.isEmptyObject(s)&&s[d]&&s[d][l]?s[d][l]:"",f=t.wp.customize.control(d+"["+l+"]");f.setting._value=null,f.setting.set(c)}else a.find(":input").first().trigger("change");e(n).trigger("idonate-customizer-refresh",a)})},e.fn.idonate_customizer_listen=function(n){var a=e.extend({closest:!1},n);return this.each(function(){if(i!==t.wp.customize){var n=a.closest?e(this).closest(".idonate-customize-complex"):e(this),o=n.find(":input"),d=n.data("unique-id"),r=n.data("option-id");d!==i&&o.on("change keyup idonate.change",function(){var i=n.find(":input").serializeObjectIDONATE(),a=!e.isEmptyObject(i)&&i[d]&&i[d][r]?i[d][r]:"";t.wp.customize.control(d+"["+r+"]").setting.set(a)})}})},e(n).on("expanded",".control-section",function(){var t=e(this);if(t.hasClass("open")&&!t.data("inited")){var n=t.find(".idonate-customize-field"),i=t.find(".idonate-customize-complex");n.length&&(t.idonate_dependency(),n.idonate_reload_script({dependency:!1}),i.idonate_customizer_listen()),t.data("inited",!0)}}),a.vars.$window.on("resize idonate.resize",a.helper.debounce(function(n){(navigator.userAgent.indexOf("AppleWebKit/")>-1?a.vars.$window.width():t.innerWidth)<=782&&!a.vars.onloaded&&(e(".idonate-section").idonate_reload_script(),a.vars.onloaded=!0)},200)).trigger("idonate.resize"),e.fn.idonate_widgets=function(){return this.each(function(){e(n).on("widget-added widget-updated",function(e,t){var n=t.find(".idonate-fields");n.length&&n.idonate_reload_script()}),e(n).on("click",".widget-top",function(t){var n=e(this).parent().find(".idonate-fields");n.length&&n.idonate_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".idonate-fields").idonate_reload_script_retry()})})},e.fn.idonate_nav_menu=function(){return this.each(function(){var t=e(this);t.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".idonate-fields").idonate_reload_script()}),t.on("sortstop",function(e,t){t.item.find(".idonate-fields").idonate_reload_script_retry()})})},e.fn.idonate_reload_script_retry=function(){return this.each(function(){var t=e(this);t.data("inited")&&t.children(".idonate-field-wp_editor").idonate_field_wp_editor()})},e.fn.idonate_reload_script=function(t){var i=e.extend({dependency:!0},t);return this.each(function(){var t=e(this);t.data("inited")||(t.children(".idonate-field-accordion").idonate_field_accordion(),t.children(".idonate-field-backup").idonate_field_backup(),t.children(".idonate-field-background").idonate_field_background(),t.children(".idonate-field-code_editor").idonate_field_code_editor(),t.children(".idonate-field-date").idonate_field_date(),t.children(".idonate-field-datetime").idonate_field_datetime(),t.children(".idonate-field-fieldset").idonate_field_fieldset(),t.children(".idonate-field-gallery").idonate_field_gallery(),t.children(".idonate-field-group").idonate_field_group(),t.children(".idonate-field-icon").idonate_field_icon(),t.children(".idonate-field-link").idonate_field_link(),t.children(".idonate-field-media").idonate_field_media(),t.children(".idonate-field-map").idonate_field_map(),t.children(".idonate-field-repeater").idonate_field_repeater(),t.children(".idonate-field-slider").idonate_field_slider(),t.children(".idonate-field-sortable").idonate_field_sortable(),t.children(".idonate-field-sorter").idonate_field_sorter(),t.children(".idonate-field-spinner").idonate_field_spinner(),t.children(".idonate-field-switcher").idonate_field_switcher(),t.children(".idonate-field-tabbed").idonate_field_tabbed(),t.children(".idonate-field-typography").idonate_field_typography(),t.children(".idonate-field-upload").idonate_field_upload(),t.children(".idonate-field-wp_editor").idonate_field_wp_editor(),t.children(".idonate-field-box_shadow").find(".idonate-color").idonate_color(),t.children(".idonate-field-border").find(".idonate-color").idonate_color(),t.children(".idonate-field-background").find(".idonate-color").idonate_color(),t.children(".idonate-field-color").find(".idonate-color").idonate_color(),t.children(".idonate-field-color_group").find(".idonate-color").idonate_color(),t.children(".idonate-field-link_color").find(".idonate-color").idonate_color(),t.children(".idonate-field-typography").find(".idonate-color").idonate_color(),t.children(".idonate-field-select").find(".idonate-chosen").idonate_chosen(),t.children(".idonate-field-checkbox").find(".idonate-checkbox").idonate_checkbox(),t.children(".idonate-field-checkbox").find(".idonate-checkbox-all").idonate_checkbox_all(),t.children(".idonate-field-button_set").find(".idonate-siblings").idonate_siblings(),t.children(".idonate-field-image_select").find(".idonate-siblings").idonate_siblings(),t.children(".idonate-field-layout_preset").find(".idonate-siblings").idonate_siblings(),t.children(".idonate-field-palette").find(".idonate-siblings").idonate_siblings(),t.children(".idonate-field").find(".idonate-help").idonate_help(),i.dependency&&t.idonate_dependency(),t.data("inited",!0),e(n).trigger("idonate-reload-script",t))})},e(n).ready(function(){e(".idonate-save").idonate_save(),e(".idonate-options").idonate_options(),e(".idonate-sticky-header").idonate_sticky(),e(".idonate-nav-options").idonate_nav_options(),e(".idonate-nav-metabox").idonate_nav_metabox(),e(".idonate-taxonomy").idonate_taxonomy(),e(".idonate-page-templates").idonate_page_templates(),e(".idonate-post-formats").idonate_post_formats(),e(".idonate-shortcode").idonate_shortcode(),e(".idonate-search").idonate_search(),e(".idonate-confirm").idonate_confirm(),e(".idonate-expand-all").idonate_expand_all(),e(".idonate-onload").idonate_reload_script(),e("#widgets-editor").idonate_widgets(),e("#widgets-right").idonate_widgets(),e("#menu-to-edit").idonate_nav_menu()})}(jQuery,window,document);